# Default values for arl-operator
# This is a YAML-formatted file.

replicaCount: 1

image:
  repository: arl-operator
  pullPolicy: IfNotPresent
  tag: "latest"

sidecar:
  image:
    repository: arl-sidecar
    pullPolicy: IfNotPresent
    tag: "latest"
  httpPort: 8080
  grpcPort: 9090

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}

podSecurityContext: {}

securityContext: {}

resources:
  limits:
    cpu: 500m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: {}

# Operator configuration
operator:
  metricsAddr: ":8080"
  probeAddr: ":8081"
  enableLeaderElection: true
  enableWebhooks: false
  enableMetrics: true
  enableMiddleware: true
  workspaceDir: "/workspace"
  httpClientTimeout: "30s"

# Pool configuration
pool:
  defaultReplicas: 3
  defaultRequeueDelay: "10s"
  sandboxCheckInterval: "2s"

# Cleanup configuration
cleanup:
  enableAutoCleanup: true
  taskRetentionDays: 30
  sandboxIdleTimeoutSeconds: 3600
  ttlCheckInterval: "30s"

# Altinity ClickHouse Operator (installed as dependency)
clickhouse-operator:
  enabled: true

# ClickHouse configuration (for audit logging)
clickhouse:
  # Enable audit logging to ClickHouse
  enabled: true
  # ClickHouse connection settings
  host: "clickhouse-clickhouse-arl"
  port: 9000
  database: "arl"
  username: "default"
  password: "clickhouse123"
  batchSize: 100
  flushInterval: "10s"
  # Storage configuration
  storageClassName: "juicefs-sc"
  storageSize: "10Gi"
  # Service configuration
  serviceType: "NodePort"
  httpNodePort: 30123  # Port for HTTP interface (8123)
  nativeNodePort: 30000  # Port for native protocol (9000)

# CRD installation
crds:
  install: true
  keep: true
