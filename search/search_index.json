{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"ARL-Infra","text":"<p>Kubernetes Operator for Agentic Reinforcement Learning environments with warm pool and sidecar injection for ultra-low latency code execution.</p>"},{"location":"#what-is-arl-infra","title":"What is ARL-Infra?","text":"<p>ARL-Infra is a Kubernetes-native infrastructure designed to provide AI agents with ultra-low latency code execution environments. It eliminates pod startup delays by maintaining warm pools of pre-created pods, allowing agents to execute code instantly.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li> Ultra-low latency: Bypasses pod startup time using warm pools</li> <li> Isolation: Each sandbox runs in an isolated environment</li> <li> Hot code reload: Update and execute code without pod restarts</li> <li>:kubernetes: Kubernetes-native: CRD-based API, standard K8s tooling</li> <li> Python SDK: High-level API for seamless integration</li> </ul>"},{"location":"#who-is-this-for","title":"Who is this for?","text":"<ul> <li> <p> Developers / Operators</p> <p>Deploy and manage ARL-Infra services on Kubernetes clusters.</p> <p> Developer Guide</p> </li> <li> <p> SDK Users</p> <p>Use the Python SDK to execute code in sandboxed environments.</p> <p> User Guide</p> </li> </ul>"},{"location":"#quick-navigation","title":"Quick Navigation","text":"I want to... Go to Understand the architecture Architecture Overview Deploy ARL-Infra to my cluster Installation Guide Use the Python SDK Python SDK Guide See examples Examples Learn about CRDs CRD Reference"},{"location":"#architecture-at-a-glance","title":"Architecture at a Glance","text":"<pre><code>graph TB\n    subgraph \"User Layer\"\n        User[User/AI Agent]\n        SDK[Python SDK]\n        User --&gt; SDK\n    end\n\n    subgraph \"Kubernetes Control Plane\"\n        API[Kubernetes API]\n        Operator[ARL Operator]\n        SDK --&gt; API\n        API --&gt; Operator\n    end\n\n    subgraph \"Data Plane\"\n        WP[WarmPool]\n        SB[Sandbox]\n        Task[Task]\n        Pods[Pod Pool]\n\n        Operator --&gt; WP\n        Operator --&gt; SB\n        Operator --&gt; Task\n        WP --&gt; Pods\n        SB --&gt; Pods\n    end</code></pre>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Choose your path:</p> I'm deploying the serviceI'm using the Python SDK <ol> <li>Review the architecture</li> <li>Install prerequisites</li> <li>Deploy to Kubernetes</li> </ol> <ol> <li>Install the SDK</li> <li>Follow the quickstart</li> <li>Explore examples</li> </ol>"},{"location":"#license","title":"License","text":"<p>This project is open source. See the repository for license details.</p>"},{"location":"developer-guide/architecture/","title":"Architecture","text":"<p>This document describes the architecture of ARL-Infra, including its components, interactions, and design decisions.</p>"},{"location":"developer-guide/architecture/#overview","title":"Overview","text":"<p>ARL-Infra consists of two main planes:</p> <ul> <li>Control Plane: The ARL Operator that manages resources and orchestrates execution</li> <li>Data Plane: Warm pool pods with sidecar agents for code execution</li> </ul> <pre><code>graph TB\n    subgraph \"User Layer\"\n        User[User/AI Agent]\n        PythonSDK[Python SDK]\n        User --&gt; PythonSDK\n        User --&gt; |kubectl apply| K8sAPI[Kubernetes API]\n        PythonSDK --&gt; |kubernetes client| K8sAPI\n    end\n\n    subgraph \"Kubernetes Control Plane\"\n        K8sAPI\n\n        subgraph \"ARL Operator\"\n            Operator[Operator Main]\n\n            subgraph \"Controllers\"\n                WPCtrl[WarmPool Controller]\n                SBCtrl[Sandbox Controller]\n                TaskCtrl[Task Controller]\n                TTLCtrl[TTL Controller]\n            end\n\n            subgraph \"Webhooks\"\n                WPWebhook[WarmPool Validator]\n                SBWebhook[Sandbox Validator]\n                TaskWebhook[Task Validator]\n            end\n\n            Operator --&gt; WPCtrl\n            Operator --&gt; SBCtrl\n            Operator --&gt; TaskCtrl\n            Operator --&gt; TTLCtrl\n            Operator --&gt; WPWebhook\n            Operator --&gt; SBWebhook\n            Operator --&gt; TaskWebhook\n        end\n\n        K8sAPI --&gt; |validate| WPWebhook\n        K8sAPI --&gt; |validate| SBWebhook\n        K8sAPI --&gt; |validate| TaskWebhook\n        K8sAPI --&gt; |watch/update| WPCtrl\n        K8sAPI --&gt; |watch/update| SBCtrl\n        K8sAPI --&gt; |watch/update| TaskCtrl\n        K8sAPI --&gt; |watch/delete| TTLCtrl\n    end\n\n    subgraph \"Kubernetes Data Plane\"\n        subgraph \"Custom Resources\"\n            WP[WarmPool CRD]\n            SB[Sandbox CRD]\n            Task[Task CRD]\n        end\n\n        subgraph \"Warm Pool Pods\"\n            Pod1[Pod 1 - Ready]\n            Pod2[Pod 2 - Allocated]\n            Pod3[Pod 3 - Ready]\n        end\n    end\n\n    WPCtrl --&gt; |create/manage| Pod1\n    WPCtrl --&gt; |create/manage| Pod2\n    WPCtrl --&gt; |create/manage| Pod3\n\n    SBCtrl --&gt; |allocate| Pod2\n    SBCtrl --&gt; |read| WP\n\n    TaskCtrl --&gt; |gRPC| Pod2\n    TaskCtrl --&gt; |read| SB\n\n    Task --&gt; |references| SB\n    SB --&gt; |references| WP</code></pre>"},{"location":"developer-guide/architecture/#core-components","title":"Core Components","text":""},{"location":"developer-guide/architecture/#arl-operator","title":"ARL Operator","text":"<p>The operator is the central control component running in the <code>arl-system</code> namespace.</p> Component Responsibility WarmPool Controller Maintains pod pools, ensures desired replica count Sandbox Controller Allocates pods from pools, manages sandbox lifecycle Task Controller Executes tasks via gRPC calls to sidecars TTL Controller Cleans up completed tasks and idle sandboxes Webhooks Validates CRD resources before creation"},{"location":"developer-guide/architecture/#sidecar-agent","title":"Sidecar Agent","text":"<p>Each pod in the warm pool includes a sidecar container that:</p> <ul> <li>Runs a gRPC server on port 50051</li> <li>Handles file operations (create, update, delete)</li> <li>Executes commands in the executor container</li> <li>Returns stdout, stderr, and exit codes</li> </ul> <pre><code>graph LR\n    subgraph \"Pod\"\n        direction TB\n        Sidecar[Sidecar Container&lt;br/&gt;gRPC Server :50051]\n        Executor[Executor Container&lt;br/&gt;User Code]\n        Volume[(Shared Volume&lt;br/&gt;/workspace)]\n\n        Sidecar -.-&gt; Volume\n        Executor -.-&gt; Volume\n    end\n\n    TaskCtrl[Task Controller] --&gt; |gRPC| Sidecar</code></pre>"},{"location":"developer-guide/architecture/#custom-resources","title":"Custom Resources","text":""},{"location":"developer-guide/architecture/#warmpool","title":"WarmPool","text":"<p>Defines a pool of pre-created pods.</p> <pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: WarmPool\nmetadata:\n  name: python-pool\nspec:\n  replicas: 3           # Number of pods to maintain\n  template:             # Pod template\n    spec:\n      containers:\n        - name: executor\n          image: python:3.9-slim\n</code></pre>"},{"location":"developer-guide/architecture/#sandbox","title":"Sandbox","text":"<p>Represents an allocated workspace.</p> <pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: Sandbox\nmetadata:\n  name: my-sandbox\nspec:\n  poolRef: python-pool  # Which pool to allocate from\n  keepAlive: true       # Keep for multiple tasks\n</code></pre>"},{"location":"developer-guide/architecture/#task","title":"Task","text":"<p>A unit of work to execute.</p> <pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: Task\nmetadata:\n  name: my-task\nspec:\n  sandboxRef: my-sandbox\n  timeout: 30s\n  steps:\n    - name: run\n      type: Command\n      command: [\"python\", \"-c\", \"print('hello')\"]\n</code></pre>"},{"location":"developer-guide/architecture/#interaction-flow","title":"Interaction Flow","text":""},{"location":"developer-guide/architecture/#task-execution-flow","title":"Task Execution Flow","text":"<pre><code>sequenceDiagram\n    participant User\n    participant API as Kubernetes API\n    participant WPC as WarmPool Controller\n    participant SBC as Sandbox Controller\n    participant TC as Task Controller\n    participant Pod as Pod (Sidecar)\n\n    Note over User,Pod: Phase 1: Create Pod Pool\n    User-&gt;&gt;API: Create WarmPool\n    API-&gt;&gt;WPC: Watch WarmPool\n    WPC-&gt;&gt;API: Create Pods\n    Note over Pod: Pods Ready\n\n    Note over User,Pod: Phase 2: Allocate Sandbox\n    User-&gt;&gt;API: Create Sandbox\n    API-&gt;&gt;SBC: Watch Sandbox\n    SBC-&gt;&gt;API: Query WarmPool\n    SBC-&gt;&gt;API: Allocate Pod (update labels)\n    Note over Pod: Pod Allocated\n    SBC-&gt;&gt;API: Update Sandbox Status (Ready)\n\n    Note over User,Pod: Phase 3: Execute Task\n    User-&gt;&gt;API: Create Task\n    API-&gt;&gt;TC: Watch Task\n    TC-&gt;&gt;API: Get Sandbox (pod IP)\n    TC-&gt;&gt;Pod: gRPC: UpdateFiles\n    Pod--&gt;&gt;TC: Success\n    TC-&gt;&gt;Pod: gRPC: Execute\n    Pod--&gt;&gt;TC: stdout, stderr, exitCode\n    TC-&gt;&gt;API: Update Task Status (Succeeded)\n    User-&gt;&gt;API: Get Task Status\n    API--&gt;&gt;User: Results</code></pre>"},{"location":"developer-guide/architecture/#data-flow","title":"Data Flow","text":"<pre><code>flowchart LR\n    subgraph \"Input\"\n        YAML[YAML/Python SDK]\n    end\n\n    subgraph \"Kubernetes Resources\"\n        WP[WarmPool]\n        SB[Sandbox]\n        Task[Task]\n    end\n\n    subgraph \"Pod Execution\"\n        File[FilePatch]\n        Cmd[Command]\n    end\n\n    subgraph \"Output\"\n        Status[Task.Status&lt;br/&gt;stdout/stderr/exitCode]\n    end\n\n    YAML --&gt; WP\n    WP --&gt; |provides| SB\n    YAML --&gt; SB\n    SB --&gt; |binds Pod| Task\n    YAML --&gt; Task\n    Task --&gt; File\n    Task --&gt; Cmd\n    File --&gt; Status\n    Cmd --&gt; Status</code></pre>"},{"location":"developer-guide/architecture/#design-decisions","title":"Design Decisions","text":""},{"location":"developer-guide/architecture/#why-warm-pools","title":"Why Warm Pools?","text":"Approach Latency Resource Usage Isolation Create pod per task 5-30s Low High Shared long-running pod &lt;100ms Medium Low Warm pool &lt;100ms Medium High <p>Warm pools provide the best balance of low latency and strong isolation.</p>"},{"location":"developer-guide/architecture/#why-sidecar-architecture","title":"Why Sidecar Architecture?","text":"<ul> <li>Separation of concerns: Sidecar handles orchestration, executor runs user code</li> <li>Language agnostic: Any container image can be used as executor</li> <li>Security: Sidecar has limited permissions, user code is sandboxed</li> <li>Observability: Sidecar can collect metrics and logs</li> </ul>"},{"location":"developer-guide/architecture/#why-crd-based-api","title":"Why CRD-based API?","text":"<ul> <li>Kubernetes-native: Uses familiar kubectl commands</li> <li>Declarative: Desired state is explicitly defined</li> <li>Extensible: Easy to add new resource types</li> <li>Auditable: All changes tracked by Kubernetes</li> </ul>"},{"location":"developer-guide/architecture/#directory-structure","title":"Directory Structure","text":"<pre><code>agent-env/\n\u251c\u2500\u2500 api/                    # CRD type definitions\n\u2502   \u2514\u2500\u2500 v1alpha1/\n\u251c\u2500\u2500 cmd/\n\u2502   \u251c\u2500\u2500 operator/          # Operator entrypoint\n\u2502   \u2514\u2500\u2500 sidecar/           # Sidecar entrypoint\n\u251c\u2500\u2500 config/\n\u2502   \u2514\u2500\u2500 crd/               # Generated CRD manifests\n\u251c\u2500\u2500 pkg/\n\u2502   \u251c\u2500\u2500 controllers/       # Reconciliation logic\n\u2502   \u251c\u2500\u2500 pb/                # Generated protobuf code\n\u2502   \u2514\u2500\u2500 webhooks/          # Validation webhooks\n\u251c\u2500\u2500 proto/                 # Protocol buffer definitions\n\u251c\u2500\u2500 sdk/python/            # Python SDK\n\u2514\u2500\u2500 charts/                # Helm charts\n</code></pre>"},{"location":"developer-guide/crd-reference/","title":"CRD Reference","text":"<p>Complete reference for ARL-Infra Custom Resource Definitions.</p>"},{"location":"developer-guide/crd-reference/#warmpool","title":"WarmPool","text":"<p>A WarmPool maintains a pool of pre-created pods ready for instant allocation.</p>"},{"location":"developer-guide/crd-reference/#spec","title":"Spec","text":"Field Type Required Description <code>replicas</code> integer Yes Number of pods to maintain in the pool <code>template</code> PodTemplateSpec Yes Pod template for pool pods"},{"location":"developer-guide/crd-reference/#status","title":"Status","text":"Field Type Description <code>ready</code> integer Number of ready (unallocated) pods <code>allocated</code> integer Number of allocated pods <code>total</code> integer Total number of pods <code>phase</code> string Current phase (Pending, Ready, Scaling) <code>conditions</code> []Condition Detailed status conditions"},{"location":"developer-guide/crd-reference/#example","title":"Example","text":"<pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: WarmPool\nmetadata:\n  name: python-pool\n  namespace: default\nspec:\n  replicas: 3\n  template:\n    spec:\n      containers:\n        - name: executor\n          image: python:3.9-slim\n          command: [\"sleep\", \"infinity\"]\n          resources:\n            requests:\n              memory: \"256Mi\"\n              cpu: \"100m\"\n            limits:\n              memory: \"512Mi\"\n              cpu: \"500m\"\n          volumeMounts:\n            - name: workspace\n              mountPath: /workspace\n      volumes:\n        - name: workspace\n          emptyDir: {}\n</code></pre>"},{"location":"developer-guide/crd-reference/#pod-labels","title":"Pod Labels","text":"<p>Pods created by WarmPool have these labels:</p> Label Value Description <code>arl.infra.io/warmpool</code> Pool name Identifies the owning pool <code>arl.infra.io/pod-state</code> <code>ready</code> or <code>allocated</code> Current pod state <code>arl.infra.io/sandbox</code> Sandbox name Set when allocated"},{"location":"developer-guide/crd-reference/#sandbox","title":"Sandbox","text":"<p>A Sandbox represents an allocated workspace - a pod bound from a WarmPool.</p>"},{"location":"developer-guide/crd-reference/#spec_1","title":"Spec","text":"Field Type Required Description <code>poolRef</code> string Yes Name of the WarmPool to allocate from <code>keepAlive</code> boolean No Keep sandbox after task completion (default: false) <code>ttlSecondsAfterFinished</code> integer No Auto-delete after this many seconds of idle time"},{"location":"developer-guide/crd-reference/#status_1","title":"Status","text":"Field Type Description <code>phase</code> string Current phase (Pending, Ready, Bound, Released) <code>podName</code> string Name of the allocated pod <code>podIP</code> string IP address of the allocated pod <code>allocatedAt</code> timestamp When the pod was allocated <code>conditions</code> []Condition Detailed status conditions"},{"location":"developer-guide/crd-reference/#phases","title":"Phases","text":"Phase Description <code>Pending</code> Waiting for pod allocation <code>Ready</code> Pod allocated and ready for tasks <code>Bound</code> Currently executing a task <code>Released</code> Sandbox released (pod returned to pool or deleted)"},{"location":"developer-guide/crd-reference/#example_1","title":"Example","text":"<pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: Sandbox\nmetadata:\n  name: my-workspace\n  namespace: default\nspec:\n  poolRef: python-pool\n  keepAlive: true\n  ttlSecondsAfterFinished: 3600  # Auto-delete after 1 hour idle\n</code></pre>"},{"location":"developer-guide/crd-reference/#task","title":"Task","text":"<p>A Task is a unit of work executed in a Sandbox.</p>"},{"location":"developer-guide/crd-reference/#spec_2","title":"Spec","text":"Field Type Required Description <code>sandboxRef</code> string Yes Name of the Sandbox to execute in <code>timeout</code> duration No Maximum execution time (default: 30s) <code>steps</code> []Step Yes List of steps to execute"},{"location":"developer-guide/crd-reference/#step","title":"Step","text":"Field Type Required Description <code>name</code> string Yes Step name <code>type</code> string Yes Step type: <code>Command</code> or <code>FilePatch</code> <code>command</code> []string For Command Command and arguments to execute <code>path</code> string For FilePatch File path to create/update <code>content</code> string For FilePatch File content <code>workDir</code> string No Working directory for commands <code>env</code> map[string]string No Environment variables"},{"location":"developer-guide/crd-reference/#status_2","title":"Status","text":"Field Type Description <code>state</code> string Current state (Pending, Running, Succeeded, Failed) <code>stdout</code> string Standard output from the last command <code>stderr</code> string Standard error from the last command <code>exitCode</code> integer Exit code from the last command <code>startedAt</code> timestamp When execution started <code>completedAt</code> timestamp When execution completed <code>steps</code> []StepStatus Status of each step"},{"location":"developer-guide/crd-reference/#states","title":"States","text":"State Description <code>Pending</code> Waiting to be executed <code>Running</code> Currently executing <code>Succeeded</code> All steps completed successfully <code>Failed</code> One or more steps failed"},{"location":"developer-guide/crd-reference/#example-command-step","title":"Example: Command Step","text":"<pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: Task\nmetadata:\n  name: run-python\n  namespace: default\nspec:\n  sandboxRef: my-workspace\n  timeout: 60s\n  steps:\n    - name: execute\n      type: Command\n      command: [\"python\", \"-c\", \"print('Hello, World!')\"]\n      workDir: /workspace\n      env:\n        DEBUG: \"true\"\n        PYTHONPATH: \"/workspace/lib\"\n</code></pre>"},{"location":"developer-guide/crd-reference/#example-filepatch-step","title":"Example: FilePatch Step","text":"<pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: Task\nmetadata:\n  name: write-and-run\n  namespace: default\nspec:\n  sandboxRef: my-workspace\n  timeout: 30s\n  steps:\n    - name: write-script\n      type: FilePatch\n      path: /workspace/script.py\n      content: |\n        import os\n        print(f\"Hello from {os.getcwd()}\")\n        print(\"Environment:\", os.environ.get(\"MY_VAR\", \"not set\"))\n\n    - name: run-script\n      type: Command\n      command: [\"python\", \"/workspace/script.py\"]\n      env:\n        MY_VAR: \"custom-value\"\n</code></pre>"},{"location":"developer-guide/crd-reference/#example-multi-step-pipeline","title":"Example: Multi-Step Pipeline","text":"<pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: Task\nmetadata:\n  name: data-pipeline\nspec:\n  sandboxRef: my-workspace\n  timeout: 120s\n  steps:\n    - name: setup\n      type: Command\n      command: [\"pip\", \"install\", \"pandas\", \"numpy\"]\n\n    - name: create-data\n      type: FilePatch\n      path: /workspace/data.csv\n      content: |\n        name,value\n        a,1\n        b,2\n        c,3\n\n    - name: create-script\n      type: FilePatch\n      path: /workspace/process.py\n      content: |\n        import pandas as pd\n        df = pd.read_csv('/workspace/data.csv')\n        print(f\"Sum: {df['value'].sum()}\")\n\n    - name: run\n      type: Command\n      command: [\"python\", \"/workspace/process.py\"]\n</code></pre>"},{"location":"developer-guide/crd-reference/#common-patterns","title":"Common Patterns","text":""},{"location":"developer-guide/crd-reference/#reusable-sandbox","title":"Reusable Sandbox","text":"<p>For executing multiple tasks in the same environment:</p> <pre><code># Create a persistent sandbox\napiVersion: arl.infra.io/v1alpha1\nkind: Sandbox\nmetadata:\n  name: persistent-workspace\nspec:\n  poolRef: python-pool\n  keepAlive: true\n---\n# Task 1\napiVersion: arl.infra.io/v1alpha1\nkind: Task\nmetadata:\n  name: task-1\nspec:\n  sandboxRef: persistent-workspace\n  steps:\n    - name: init\n      type: FilePatch\n      path: /workspace/state.txt\n      content: \"initialized\"\n---\n# Task 2 (uses same sandbox)\napiVersion: arl.infra.io/v1alpha1\nkind: Task\nmetadata:\n  name: task-2\nspec:\n  sandboxRef: persistent-workspace\n  steps:\n    - name: read\n      type: Command\n      command: [\"cat\", \"/workspace/state.txt\"]\n</code></pre>"},{"location":"developer-guide/crd-reference/#auto-cleanup","title":"Auto-Cleanup","text":"<p>For temporary workspaces that auto-delete:</p> <pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: Sandbox\nmetadata:\n  name: temp-workspace\nspec:\n  poolRef: python-pool\n  keepAlive: false\n  ttlSecondsAfterFinished: 300  # Delete 5 minutes after last task\n</code></pre>"},{"location":"developer-guide/crd-reference/#custom-container-image","title":"Custom Container Image","text":"<p>For specialized environments:</p> <pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: WarmPool\nmetadata:\n  name: ml-pool\nspec:\n  replicas: 2\n  template:\n    spec:\n      containers:\n        - name: executor\n          image: pytorch/pytorch:2.0.0-cuda11.7-cudnn8-runtime\n          command: [\"sleep\", \"infinity\"]\n          resources:\n            limits:\n              nvidia.com/gpu: 1\n          volumeMounts:\n            - name: workspace\n              mountPath: /workspace\n      volumes:\n        - name: workspace\n          emptyDir: {}\n</code></pre>"},{"location":"developer-guide/deployment/","title":"Deployment","text":"<p>This guide covers deploying ARL-Infra to various environments.</p>"},{"location":"developer-guide/deployment/#deployment-options","title":"Deployment Options","text":"Method Best For Auto-Rebuild Skaffold (default) Local minikube No Skaffold (dev) Development with auto-sync Yes Skaffold (k8s) K8s clusters with registry No Skaffold (prod) Production No Helm Custom deployments No"},{"location":"developer-guide/deployment/#skaffold-deployment-recommended","title":"Skaffold Deployment (Recommended)","text":""},{"location":"developer-guide/deployment/#prerequisites-setup","title":"Prerequisites Setup","text":"<p>Before first deployment, run the setup command:</p> <pre><code># Setup K8s prerequisites (ClickHouse operator, Helm dependencies)\nmake k8s-setup\n</code></pre> <p>This will: 1. Install ClickHouse operator 2. Update Helm dependencies 3. Prepare CRDs for installation</p>"},{"location":"developer-guide/deployment/#local-development-minikube","title":"Local Development (minikube)","text":"<p>For iterative development with auto-rebuild:</p> <pre><code># Start development mode with file watching\nskaffold dev --profile=dev\n</code></pre> <p>Or for a one-time deployment:</p> <pre><code># Deploy to minikube\nskaffold run\n</code></pre>"},{"location":"developer-guide/deployment/#deploy-to-kubernetes-cluster","title":"Deploy to Kubernetes Cluster","text":"<p>For staging or production clusters with a container registry:</p> <pre><code># Deploy using k8s profile\nskaffold run --profile=k8s\n\n# With sample resources\nskaffold run --profile=k8s-with-samples\n</code></pre>"},{"location":"developer-guide/deployment/#deploy-to-production","title":"Deploy to Production","text":"<pre><code># Deploy to production\nskaffold run --profile=prod\n</code></pre>"},{"location":"developer-guide/deployment/#delete-deployment","title":"Delete Deployment","text":"<pre><code># Delete resources deployed by Skaffold\nskaffold delete\n\n# Or with specific profile\nskaffold delete --profile=k8s\n</code></pre>"},{"location":"developer-guide/deployment/#helm-deployment","title":"Helm Deployment","text":""},{"location":"developer-guide/deployment/#prerequisites","title":"Prerequisites","text":"<pre><code># Add Helm repository for dependencies\nhelm repo add clickhouse-operator https://helm.altinity.com\nhelm repo update\n\n# Update chart dependencies\ncd charts/arl-operator\nhelm dependency update\n</code></pre>"},{"location":"developer-guide/deployment/#install","title":"Install","text":"<pre><code># Install with default values\nhelm install arl-operator charts/arl-operator -n arl-system --create-namespace\n\n# Install with custom values\nhelm install arl-operator charts/arl-operator \\\n  -n arl-system \\\n  --create-namespace \\\n  -f my-values.yaml\n</code></pre>"},{"location":"developer-guide/deployment/#configuration","title":"Configuration","text":"<p>Create a <code>values.yaml</code> file:</p> <pre><code>operator:\n  image:\n    repository: your-registry/arl-operator\n    tag: v1.0.0\n  replicas: 1\n  resources:\n    limits:\n      cpu: 500m\n      memory: 512Mi\n    requests:\n      cpu: 100m\n      memory: 128Mi\n\nsidecar:\n  image:\n    repository: your-registry/arl-sidecar\n    tag: v1.0.0\n</code></pre>"},{"location":"developer-guide/deployment/#upgrade","title":"Upgrade","text":"<pre><code>helm upgrade arl-operator charts/arl-operator -n arl-system -f my-values.yaml\n</code></pre>"},{"location":"developer-guide/deployment/#uninstall","title":"Uninstall","text":"<pre><code>helm uninstall arl-operator -n arl-system\n</code></pre>"},{"location":"developer-guide/deployment/#manual-deployment","title":"Manual Deployment","text":""},{"location":"developer-guide/deployment/#1-install-crds","title":"1. Install CRDs","text":"<pre><code>kubectl apply -f config/crd/\n</code></pre>"},{"location":"developer-guide/deployment/#2-create-namespace","title":"2. Create Namespace","text":"<pre><code>kubectl create namespace arl-system\n</code></pre>"},{"location":"developer-guide/deployment/#3-deploy-operator","title":"3. Deploy Operator","text":"<pre><code># Build and push images\ndocker build -f Dockerfile.operator -t your-registry/arl-operator:latest .\ndocker push your-registry/arl-operator:latest\n\n# Deploy\nkubectl apply -f config/deployment/operator.yaml -n arl-system\n</code></pre>"},{"location":"developer-guide/deployment/#4-verify-deployment","title":"4. Verify Deployment","text":"<pre><code>kubectl get pods -n arl-system\nkubectl logs -n arl-system -l app=arl-operator\n</code></pre>"},{"location":"developer-guide/deployment/#post-deployment-setup","title":"Post-Deployment Setup","text":""},{"location":"developer-guide/deployment/#create-a-warmpool","title":"Create a WarmPool","text":"<p>After deploying ARL-Infra, create at least one WarmPool:</p> <pre><code># warmpool.yaml\napiVersion: arl.infra.io/v1alpha1\nkind: WarmPool\nmetadata:\n  name: python-pool\nspec:\n  replicas: 3\n  template:\n    spec:\n      containers:\n        - name: executor\n          image: python:3.9-slim\n          command: [\"sleep\", \"infinity\"]\n          volumeMounts:\n            - name: workspace\n              mountPath: /workspace\n      volumes:\n        - name: workspace\n          emptyDir: {}\n</code></pre> <pre><code>kubectl apply -f warmpool.yaml\n</code></pre>"},{"location":"developer-guide/deployment/#verify-warmpool","title":"Verify WarmPool","text":"<pre><code># Check WarmPool status\nkubectl get warmpools\n\n# Check pods created by the pool\nkubectl get pods -l arl.infra.io/warmpool=python-pool\n</code></pre>"},{"location":"developer-guide/deployment/#production-considerations","title":"Production Considerations","text":""},{"location":"developer-guide/deployment/#high-availability","title":"High Availability","text":"<p>For production deployments:</p> <pre><code># values.yaml\noperator:\n  replicas: 3\n  affinity:\n    podAntiAffinity:\n      requiredDuringSchedulingIgnoredDuringExecution:\n        - labelSelector:\n            matchLabels:\n              app: arl-operator\n          topologyKey: kubernetes.io/hostname\n</code></pre>"},{"location":"developer-guide/deployment/#resource-quotas","title":"Resource Quotas","text":"<p>Set resource quotas for namespaces:</p> <pre><code>apiVersion: v1\nkind: ResourceQuota\nmetadata:\n  name: arl-quota\n  namespace: arl-system\nspec:\n  hard:\n    pods: \"100\"\n    requests.cpu: \"10\"\n    requests.memory: 20Gi\n    limits.cpu: \"20\"\n    limits.memory: 40Gi\n</code></pre>"},{"location":"developer-guide/deployment/#monitoring","title":"Monitoring","text":"<p>Enable Prometheus metrics:</p> <pre><code># values.yaml\noperator:\n  metrics:\n    enabled: true\n    port: 8080\n</code></pre>"},{"location":"developer-guide/deployment/#network-policies","title":"Network Policies","text":"<p>Restrict network access:</p> <pre><code>apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: arl-operator-policy\n  namespace: arl-system\nspec:\n  podSelector:\n    matchLabels:\n      app: arl-operator\n  policyTypes:\n    - Ingress\n    - Egress\n  ingress:\n    - from:\n        - namespaceSelector: {}\n  egress:\n    - to:\n        - namespaceSelector: {}\n</code></pre>"},{"location":"developer-guide/deployment/#clean-up","title":"Clean Up","text":""},{"location":"developer-guide/deployment/#using-skaffold","title":"Using Skaffold","text":"<pre><code># Delete all deployed resources\nskaffold delete\n\n# Delete with specific profile\nskaffold delete --profile=k8s\n</code></pre>"},{"location":"developer-guide/deployment/#manual-cleanup","title":"Manual Cleanup","text":"<pre><code># Delete all tasks\nkubectl delete tasks --all\n\n# Delete all sandboxes\nkubectl delete sandboxes --all\n\n# Delete all warmpools\nkubectl delete warmpools --all\n\n# Delete Helm release\nhelm uninstall arl-operator -n arl-system\n\n# Delete CRDs\nkubectl delete -f config/crd/\n\n# Delete namespace\nkubectl delete namespace arl-system\n</code></pre>"},{"location":"developer-guide/deployment/#troubleshooting","title":"Troubleshooting","text":""},{"location":"developer-guide/deployment/#operator-not-starting","title":"Operator Not Starting","text":"<pre><code># Check pod status\nkubectl get pods -n arl-system\n\n# Check logs using make target\nmake logs\n\n# Describe pod for events\nkubectl describe pod -n arl-system -l app=arl-operator\n</code></pre>"},{"location":"developer-guide/deployment/#warmpool-pods-not-creating","title":"WarmPool Pods Not Creating","text":"<pre><code># Check WarmPool status\nkubectl describe warmpool &lt;name&gt;\n\n# Check operator logs for errors\nmake logs\n</code></pre>"},{"location":"developer-guide/deployment/#task-not-executing","title":"Task Not Executing","text":"<pre><code># Check Task status\nkubectl describe task &lt;name&gt;\n\n# Check sandbox status\nkubectl describe sandbox &lt;sandbox-name&gt;\n\n# Check sidecar logs in the pod\nkubectl logs &lt;pod-name&gt; -c sidecar\n</code></pre>"},{"location":"developer-guide/development/","title":"Development","text":"<p>This guide covers the development workflow for contributing to ARL-Infra.</p>"},{"location":"developer-guide/development/#development-environment","title":"Development Environment","text":""},{"location":"developer-guide/development/#prerequisites","title":"Prerequisites","text":"<p>Ensure you have completed the Installation steps.</p>"},{"location":"developer-guide/development/#project-structure","title":"Project Structure","text":"<pre><code>agent-env/\n\u251c\u2500\u2500 api/                    # CRD type definitions (Go)\n\u2502   \u2514\u2500\u2500 v1alpha1/\n\u251c\u2500\u2500 cmd/\n\u2502   \u251c\u2500\u2500 operator/          # Operator entrypoint\n\u2502   \u2514\u2500\u2500 sidecar/           # Sidecar entrypoint\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 crd/               # Generated CRD manifests\n\u2502   \u2514\u2500\u2500 samples/           # Sample resources\n\u251c\u2500\u2500 pkg/\n\u2502   \u251c\u2500\u2500 controllers/       # Reconciliation logic\n\u2502   \u251c\u2500\u2500 pb/                # Generated protobuf code\n\u2502   \u2514\u2500\u2500 webhooks/          # Validation webhooks\n\u251c\u2500\u2500 proto/                 # Protocol buffer definitions\n\u251c\u2500\u2500 sdk/python/            # Python SDK\n\u2502   \u2514\u2500\u2500 arl/\n\u251c\u2500\u2500 charts/                # Helm charts\n\u2502   \u2514\u2500\u2500 arl-operator/\n\u251c\u2500\u2500 examples/              # Example code\n\u2502   \u2514\u2500\u2500 python/\n\u2514\u2500\u2500 docs/                  # Documentation\n</code></pre>"},{"location":"developer-guide/development/#development-workflow","title":"Development Workflow","text":""},{"location":"developer-guide/development/#1-start-development-environment","title":"1. Start Development Environment","text":"<pre><code># Setup K8s prerequisites (first time only)\nmake k8s-setup\n\n# Start development with auto-rebuild\nskaffold dev --profile=dev\n</code></pre> <p>This watches for file changes and automatically rebuilds/redeploys.</p>"},{"location":"developer-guide/development/#2-make-changes","title":"2. Make Changes","text":"<p>Edit code in the relevant directories:</p> Change Type Directory CRD definitions <code>api/v1alpha1/</code> Controller logic <code>pkg/controllers/</code> Sidecar code <code>cmd/sidecar/</code>, <code>pkg/sidecar/</code> gRPC definitions <code>proto/</code> Python SDK <code>sdk/python/arl/</code>"},{"location":"developer-guide/development/#3-regenerate-code","title":"3. Regenerate Code","text":"<p>After modifying certain files, regenerate derived code:</p> <pre><code># After changing api/v1alpha1/*.go\nmake manifests    # Regenerate CRD manifests\nmake deepcopy     # Regenerate deepcopy methods\n\n# After changing proto/*.proto\nmake proto-go     # Regenerate Go gRPC code\n\n# After changing CRDs\nmake sdk-python   # Regenerate Python SDK\n\n# Or regenerate everything\nmake generate\n</code></pre>"},{"location":"developer-guide/development/#4-run-quality-checks","title":"4. Run Quality Checks","text":"<pre><code># Run all checks (Go + Python)\nmake check\n</code></pre> <p>This runs: - <code>go fmt ./...</code> - <code>go vet ./...</code> - <code>go mod tidy</code> - <code>ruff check</code> and <code>ruff format</code> for Python - <code>mypy</code> for Python type checking</p>"},{"location":"developer-guide/development/#5-test-changes","title":"5. Test Changes","text":"<pre><code># Deploy with samples for testing\nskaffold run --profile=with-samples\n\n# View operator logs\nmake logs\n\n# Check resource status\nkubectl get warmpools,sandboxes,tasks\n</code></pre>"},{"location":"developer-guide/development/#code-generation-details","title":"Code Generation Details","text":""},{"location":"developer-guide/development/#crd-manifests","title":"CRD Manifests","text":"<p>Generated from Go types using controller-gen:</p> <pre><code>make manifests\n</code></pre> <p>Output: <code>config/crd/*.yaml</code></p>"},{"location":"developer-guide/development/#deepcopy-methods","title":"DeepCopy Methods","text":"<p>Generated for Kubernetes objects:</p> <pre><code>make deepcopy\n</code></pre> <p>Output: <code>api/v1alpha1/zz_generated.deepcopy.go</code></p>"},{"location":"developer-guide/development/#grpc-code","title":"gRPC Code","text":"<p>Generated from Protocol Buffer definitions:</p> <pre><code>make proto-go\n</code></pre> <p>Input: <code>proto/agent.proto</code> Output: <code>pkg/pb/*.pb.go</code></p>"},{"location":"developer-guide/development/#python-sdk","title":"Python SDK","text":"<p>Generated from CRD OpenAPI schemas:</p> <pre><code>make sdk-python\n</code></pre> <p>Output: <code>sdk/python/arl/arl/arl_client/</code></p>"},{"location":"developer-guide/development/#architecture-validation","title":"Architecture Validation","text":"<p>Validate architecture documentation:</p> <pre><code>make arch-check\n</code></pre> <p>This checks: - Component definitions in <code>architecture/components.yaml</code> - Dependency mappings in <code>architecture/dependencies.yaml</code> - Propagation rules in <code>architecture/propagation-rules.yaml</code></p>"},{"location":"developer-guide/development/#common-development-tasks","title":"Common Development Tasks","text":""},{"location":"developer-guide/development/#adding-a-new-crd-field","title":"Adding a New CRD Field","text":"<ol> <li> <p>Edit the type definition in <code>api/v1alpha1/</code>:</p> <pre><code>type SandboxSpec struct {\n    PoolRef   string `json:\"poolRef\"`\n    KeepAlive bool   `json:\"keepAlive,omitempty\"`\n    NewField  string `json:\"newField,omitempty\"` // Add new field\n}\n</code></pre> </li> <li> <p>Regenerate code:</p> <pre><code>make manifests deepcopy sdk-python\n</code></pre> </li> <li> <p>Update controller logic in <code>pkg/controllers/</code></p> </li> <li> <p>Run checks:</p> <pre><code>make check\n</code></pre> </li> </ol>"},{"location":"developer-guide/development/#adding-a-new-controller","title":"Adding a New Controller","text":"<ol> <li>Create controller file in <code>pkg/controllers/</code></li> <li>Register in <code>cmd/operator/main.go</code></li> <li>Add necessary RBAC markers</li> <li> <p>Regenerate manifests:</p> <pre><code>make manifests\n</code></pre> </li> </ol>"},{"location":"developer-guide/development/#modifying-grpc-api","title":"Modifying gRPC API","text":"<ol> <li>Edit <code>proto/agent.proto</code></li> <li> <p>Regenerate Go code:</p> <pre><code>make proto-go\n</code></pre> </li> <li> <p>Update sidecar implementation in <code>cmd/sidecar/</code></p> </li> </ol>"},{"location":"developer-guide/development/#debugging","title":"Debugging","text":""},{"location":"developer-guide/development/#view-operator-logs","title":"View Operator Logs","text":"<pre><code># Stream logs\nmake logs\n\n# Or manually\nkubectl logs -n arl-system -l app=arl-operator -f\n</code></pre>"},{"location":"developer-guide/development/#view-sidecar-logs","title":"View Sidecar Logs","text":"<pre><code># Get pod name\nkubectl get pods -l arl.infra.io/warmpool\n\n# View sidecar logs\nkubectl logs &lt;pod-name&gt; -c sidecar\n</code></pre>"},{"location":"developer-guide/development/#debug-with-delve","title":"Debug with Delve","text":"<p>For local debugging:</p> <pre><code># Run operator locally\ngo run cmd/operator/main.go\n\n# Or with delve\ndlv debug cmd/operator/main.go\n</code></pre>"},{"location":"developer-guide/development/#release-process","title":"Release Process","text":""},{"location":"developer-guide/development/#build-and-publish-sdk","title":"Build and Publish SDK","text":"<pre><code># Build SDK package\nmake build-sdk\n\n# Publish to Test PyPI (for testing)\nmake publish-test\n\n# Publish to Production PyPI\nmake publish\n</code></pre>"},{"location":"developer-guide/development/#clean-build-artifacts","title":"Clean Build Artifacts","text":"<pre><code># Clean Python SDK artifacts\nmake clean-sdk\n</code></pre>"},{"location":"developer-guide/development/#useful-commands-reference","title":"Useful Commands Reference","text":"Command Description <code>make help</code> Show all available make targets <code>make install-tools</code> Install all development tools <code>make k8s-setup</code> Setup K8s prerequisites <code>make generate</code> Generate all code <code>make check</code> Run all quality checks <code>make logs</code> Stream operator logs <code>make build-sdk</code> Build Python SDK <code>make arch-check</code> Validate architecture docs <code>skaffold dev --profile=dev</code> Development with auto-rebuild <code>skaffold run</code> Deploy to cluster <code>skaffold delete</code> Delete deployment"},{"location":"developer-guide/installation/","title":"Installation","text":"<p>This guide covers all installation options for ARL-Infra.</p>"},{"location":"developer-guide/installation/#prerequisites","title":"Prerequisites","text":""},{"location":"developer-guide/installation/#required-tools","title":"Required Tools","text":"Tool Version Installation Go 1.25+ golang.org/dl Docker 20.x+ docker.com kubectl Latest kubernetes.io Helm 3.x helm.sh"},{"location":"developer-guide/installation/#optional-tools","title":"Optional Tools","text":"Tool Purpose Installation minikube Local development minikube.sigs.k8s.io kind Local development kind.sigs.k8s.io Skaffold Development workflow skaffold.dev"},{"location":"developer-guide/installation/#kubernetes-cluster-setup","title":"Kubernetes Cluster Setup","text":""},{"location":"developer-guide/installation/#option-1-minikube-recommended-for-development","title":"Option 1: minikube (Recommended for Development)","text":"<pre><code># Start minikube\nminikube start --cpus=4 --memory=8192\n\n# Enable required addons\nminikube addons enable ingress\nminikube addons enable metrics-server\n\n# Verify\nkubectl cluster-info\n</code></pre>"},{"location":"developer-guide/installation/#option-2-kind","title":"Option 2: kind","text":"<pre><code># Create cluster\nkind create cluster --name arl-dev\n\n# Verify\nkubectl cluster-info\n</code></pre>"},{"location":"developer-guide/installation/#option-3-existing-cluster","title":"Option 3: Existing Cluster","text":"<p>Ensure you have:</p> <ul> <li>Kubernetes 1.25 or higher</li> <li>Cluster admin access</li> <li>Storage class available</li> </ul> <pre><code># Verify cluster access\nkubectl cluster-info\nkubectl get nodes\n</code></pre>"},{"location":"developer-guide/installation/#install-development-tools","title":"Install Development Tools","text":"<p>Install all required development tools:</p> <pre><code># Clone the repository\ngit clone https://github.com/Lincyaw/agent-env.git\ncd agent-env\n\n# Install all tools (protoc, Go tools, Python tools)\nmake install-tools\n</code></pre> <p>This installs:</p> <ul> <li>Protocol Buffers compiler (protoc)</li> <li>Go tools (protoc-gen-go, protoc-gen-go-grpc, controller-gen)</li> <li>Python tools (via uv sync)</li> </ul>"},{"location":"developer-guide/installation/#manual-installation","title":"Manual Installation","text":"<p>If you prefer manual installation:</p> Protocol BuffersGo ToolsPython Tools <pre><code># Installs protoc v28.3\nmake install-protoc\n</code></pre> <pre><code># Installs protoc-gen-go, protoc-gen-go-grpc, controller-gen\nmake install-go-tools\n</code></pre> <pre><code># Installs Python dependencies via uv\nmake install-python-tools\n</code></pre>"},{"location":"developer-guide/installation/#build-from-source","title":"Build from Source","text":""},{"location":"developer-guide/installation/#generate-code","title":"Generate Code","text":"<pre><code># Generate all code (proto, CRDs, deepcopy, Python SDK)\nmake generate\n\n# Or individually:\nmake proto-go      # Generate Go gRPC code from proto files\nmake manifests     # Generate CRD manifests\nmake deepcopy      # Generate deepcopy code\nmake sdk-python    # Generate Python SDK from CRDs\n</code></pre>"},{"location":"developer-guide/installation/#code-quality","title":"Code Quality","text":"<pre><code># Run all code quality checks (Go fmt, vet, tidy + Python ruff, mypy)\nmake check\n\n# Or individually:\nmake fmt           # Run go fmt\nmake vet           # Run go vet\nmake tidy          # Run go mod tidy\n</code></pre>"},{"location":"developer-guide/installation/#build-python-sdk","title":"Build Python SDK","text":"<pre><code># Build Python SDK package\nmake build-sdk\n\n# Publish to Test PyPI\nmake publish-test\n\n# Publish to Production PyPI\nmake publish\n\n# Clean SDK build artifacts\nmake clean-sdk\n</code></pre>"},{"location":"developer-guide/installation/#install-crds","title":"Install CRDs","text":"<p>Install Custom Resource Definitions:</p> <pre><code># Generate and install CRDs\nmake manifests\nkubectl apply -f config/crd/\n</code></pre> <p>Verify CRDs are installed:</p> <pre><code>kubectl get crds | grep arl.infra.io\n</code></pre> <p>Expected output:</p> <pre><code>sandboxes.arl.infra.io           2024-01-01T00:00:00Z\ntasks.arl.infra.io               2024-01-01T00:00:00Z\nwarmpools.arl.infra.io           2024-01-01T00:00:00Z\n</code></pre>"},{"location":"developer-guide/installation/#next-steps","title":"Next Steps","text":"<p>After installation, proceed to:</p> <ul> <li>Deployment Guide - Deploy ARL-Infra to your cluster</li> <li>Development Guide - Set up development environment</li> </ul>"},{"location":"developer-guide/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"developer-guide/installation/#common-issues","title":"Common Issues","text":"<p>CRD not found</p> <p>If you see \"no matches for kind\" errors:</p> <pre><code># Regenerate and apply CRDs\nmake manifests\nkubectl apply -f config/crd/\n</code></pre> <p>Permission denied</p> <p>If you see RBAC errors:</p> <pre><code># Ensure you have cluster-admin access\nkubectl auth can-i create deployments --all-namespaces\n</code></pre> <p>Image pull errors</p> <p>If pods fail to start due to image issues:</p> <pre><code># For minikube, use local images\neval $(minikube docker-env)\nmake build\n</code></pre>"},{"location":"developer-guide/installation/#verify-installation","title":"Verify Installation","text":"<p>Run the verification script:</p> <pre><code># Check all prerequisites\nkubectl cluster-info\nkubectl get crds | grep arl\ndocker version\ngo version\n</code></pre>"},{"location":"getting-started/developers/","title":"Getting Started for Developers","text":"<p>This guide is for developers and operators who need to deploy and manage ARL-Infra on a Kubernetes cluster.</p>"},{"location":"getting-started/developers/#prerequisites","title":"Prerequisites","text":"<p>Before deploying ARL-Infra, ensure you have:</p> Requirement Version Purpose Kubernetes 1.25+ Container orchestration kubectl Latest Kubernetes CLI Helm 3.x Package manager Docker 20.x+ Container runtime Go 1.25+ Building from source Skaffold Latest Development workflow"},{"location":"getting-started/developers/#quick-start","title":"Quick Start","text":""},{"location":"getting-started/developers/#option-1-using-skaffold-recommended","title":"Option 1: Using Skaffold (Recommended)","text":"<pre><code># Clone the repository\ngit clone https://github.com/Lincyaw/agent-env.git\ncd agent-env\n\n# Setup K8s prerequisites (ClickHouse operator, Helm dependencies)\nmake k8s-setup\n\n# Deploy using Skaffold (default profile for minikube)\nskaffold run\n\n# Or for development with auto-rebuild\nskaffold dev --profile=dev\n\n# Deploy to K8s cluster with registry\nskaffold run --profile=k8s\n\n# Deploy with sample resources\nskaffold run --profile=with-samples\n</code></pre>"},{"location":"getting-started/developers/#option-2-deploy-to-production","title":"Option 2: Deploy to Production","text":"<pre><code># Deploy to production environment\nskaffold run --profile=prod\n</code></pre>"},{"location":"getting-started/developers/#verify-deployment","title":"Verify Deployment","text":"<pre><code># Check operator pods\nkubectl get pods -n arl-system\n\n# Check CRDs are installed\nkubectl get crds | grep arl.infra.io\n\n# Check custom resources\nkubectl get warmpools,sandboxes,tasks\n\n# View operator logs\nmake logs\n</code></pre>"},{"location":"getting-started/developers/#whats-next","title":"What's Next?","text":"<p>After deploying ARL-Infra, proceed to:</p> <ol> <li>Architecture - Understand the system design</li> <li>Installation - Detailed installation options</li> <li>Deployment - Production deployment guide</li> <li>CRD Reference - Custom Resource definitions</li> </ol>"},{"location":"getting-started/developers/#quick-test","title":"Quick Test","text":"<p>Create a simple warm pool and execute a task:</p> <pre><code># Create a warm pool\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: arl.infra.io/v1alpha1\nkind: WarmPool\nmetadata:\n  name: test-pool\nspec:\n  replicas: 1\n  template:\n    spec:\n      containers:\n        - name: executor\n          image: python:3.9-slim\n          command: [\"sleep\", \"infinity\"]\nEOF\n\n# Wait for pods to be ready\nkubectl get pods -w\n\n# Create a sandbox\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: arl.infra.io/v1alpha1\nkind: Sandbox\nmetadata:\n  name: test-sandbox\nspec:\n  poolRef: test-pool\n  keepAlive: true\nEOF\n\n# Execute a task\ncat &lt;&lt;EOF | kubectl apply -f -\napiVersion: arl.infra.io/v1alpha1\nkind: Task\nmetadata:\n  name: test-task\nspec:\n  sandboxRef: test-sandbox\n  timeout: 30s\n  steps:\n    - name: hello\n      type: Command\n      command: [\"echo\", \"Hello from ARL-Infra!\"]\nEOF\n\n# Check the result\nkubectl get task test-task -o jsonpath='{.status.stdout}'\n</code></pre>"},{"location":"getting-started/developers/#troubleshooting","title":"Troubleshooting","text":"Issue Solution Pods not starting Check <code>kubectl describe pod</code> for events CRDs not found Run <code>make manifests</code> and apply CRDs Operator not running Check <code>make logs</code> for operator logs Helm dependency issues Run <code>make k8s-setup</code> to update dependencies"},{"location":"getting-started/overview/","title":"Overview","text":"<p>ARL-Infra provides a Kubernetes-native infrastructure for AI agent code execution with ultra-low latency.</p>"},{"location":"getting-started/overview/#the-problem","title":"The Problem","text":"<p>Traditional approaches to running agent code in Kubernetes face significant challenges:</p> <ul> <li>Cold start latency: Creating a new pod for each task takes 5-30 seconds</li> <li>Resource overhead: Maintaining always-on pods is expensive</li> <li>Isolation: Running multiple tasks in shared environments creates security risks</li> </ul>"},{"location":"getting-started/overview/#the-solution","title":"The Solution","text":"<p>ARL-Infra solves these problems with a warm pool architecture:</p> <pre><code>flowchart LR\n    subgraph \"Traditional Approach\"\n        A[Task Request] --&gt; B[Create Pod]\n        B --&gt; C[Pull Image]\n        C --&gt; D[Start Container]\n        D --&gt; E[Execute Code]\n        style B fill:#ff6b6b\n        style C fill:#ff6b6b\n        style D fill:#ff6b6b\n    end</code></pre> <pre><code>flowchart LR\n    subgraph \"ARL-Infra Approach\"\n        A[Task Request] --&gt; B[Allocate from Pool]\n        B --&gt; C[Execute Code]\n        style B fill:#51cf66\n    end</code></pre>"},{"location":"getting-started/overview/#core-concepts","title":"Core Concepts","text":""},{"location":"getting-started/overview/#1-warmpool","title":"1. WarmPool","text":"<p>A WarmPool maintains a set of pre-created pods ready for instant allocation. Think of it as a \"parking lot\" with reserved spots.</p> <pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: WarmPool\nmetadata:\n  name: python-pool\nspec:\n  replicas: 3  # Keep 3 pods ready\n</code></pre>"},{"location":"getting-started/overview/#2-sandbox","title":"2. Sandbox","text":"<p>A Sandbox is your workspace - a pod allocated from the warm pool. It's your \"reserved parking spot.\"</p> <pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: Sandbox\nmetadata:\n  name: my-workspace\nspec:\n  poolRef: python-pool\n</code></pre>"},{"location":"getting-started/overview/#3-task","title":"3. Task","text":"<p>A Task is a unit of work executed in a sandbox - the \"parking and retrieval operation.\"</p> <pre><code>apiVersion: arl.infra.io/v1alpha1\nkind: Task\nmetadata:\n  name: run-code\nspec:\n  sandboxRef: my-workspace\n  steps:\n    - name: execute\n      type: Command\n      command: [\"python\", \"-c\", \"print('Hello!')\"]\n</code></pre>"},{"location":"getting-started/overview/#workflow","title":"Workflow","text":"<pre><code>sequenceDiagram\n    participant User\n    participant SDK\n    participant K8s as Kubernetes API\n    participant Operator\n    participant Pod\n\n    Note over User,Pod: Setup Phase (one-time)\n    User-&gt;&gt;SDK: Create WarmPool\n    SDK-&gt;&gt;K8s: Apply WarmPool CRD\n    K8s-&gt;&gt;Operator: Watch event\n    Operator-&gt;&gt;Pod: Create pods (pre-warm)\n\n    Note over User,Pod: Execution Phase (fast!)\n    User-&gt;&gt;SDK: Execute task\n    SDK-&gt;&gt;K8s: Create Sandbox + Task\n    K8s-&gt;&gt;Operator: Watch events\n    Operator-&gt;&gt;Pod: Allocate pod &amp; execute\n    Pod--&gt;&gt;Operator: Return results\n    Operator-&gt;&gt;K8s: Update Task status\n    K8s--&gt;&gt;SDK: Task completed\n    SDK--&gt;&gt;User: Return results</code></pre>"},{"location":"getting-started/overview/#choose-your-path","title":"Choose Your Path","text":"<p>Based on your role, proceed to the appropriate guide:</p> Role Description Next Steps Developer / Operator Deploy and manage ARL-Infra Developer Getting Started SDK User Use Python SDK only SDK User Getting Started"},{"location":"getting-started/sdk-users/","title":"Getting Started for SDK Users","text":"<p>This guide is for users who want to use the Python SDK to execute code in ARL-Infra sandboxed environments. You don't need to deploy or manage the infrastructure - just use the SDK!</p>"},{"location":"getting-started/sdk-users/#prerequisites","title":"Prerequisites","text":"Requirement Description Python 3.9 or higher Kubernetes access Valid <code>kubeconfig</code> with cluster access ARL-Infra deployed The operator must be running on the cluster <p>Don't have ARL-Infra deployed?</p> <p>Ask your cluster administrator to deploy ARL-Infra, or follow the Developer Guide if you need to set it up yourself.</p>"},{"location":"getting-started/sdk-users/#installation","title":"Installation","text":"<p>Install the ARL SDK using pip:</p> <pre><code>pip install arl-env\n</code></pre> <p>Or using uv:</p> <pre><code>uv add arl-env\n</code></pre>"},{"location":"getting-started/sdk-users/#quick-start","title":"Quick Start","text":""},{"location":"getting-started/sdk-users/#1-verify-cluster-access","title":"1. Verify Cluster Access","text":"<pre><code># Ensure you can access the cluster\nkubectl cluster-info\n\n# Check if ARL-Infra is deployed\nkubectl get crds | grep arl.infra.io\n</code></pre>"},{"location":"getting-started/sdk-users/#2-basic-usage","title":"2. Basic Usage","text":"<pre><code>from arl import SandboxSession\n\n# Create a session (automatically allocates a sandbox)\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    # Execute a command\n    result = session.execute([\n        {\n            \"name\": \"hello\",\n            \"type\": \"Command\",\n            \"command\": [\"echo\", \"Hello, World!\"],\n        }\n    ])\n\n    # Get the output\n    print(result[\"status\"][\"stdout\"])  # \"Hello, World!\"\n</code></pre>"},{"location":"getting-started/sdk-users/#3-multi-step-tasks","title":"3. Multi-Step Tasks","text":"<pre><code>from arl import SandboxSession\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = session.execute([\n        # Step 1: Create a Python file\n        {\n            \"name\": \"write_script\",\n            \"type\": \"FilePatch\",\n            \"path\": \"/workspace/hello.py\",\n            \"content\": \"print('Hello from Python!')\",\n        },\n        # Step 2: Execute the file\n        {\n            \"name\": \"run_script\",\n            \"type\": \"Command\",\n            \"command\": [\"python\", \"/workspace/hello.py\"],\n        },\n    ])\n\n    print(result[\"status\"][\"stdout\"])  # \"Hello from Python!\"\n</code></pre>"},{"location":"getting-started/sdk-users/#whats-next","title":"What's Next?","text":"<p>Continue learning with these resources:</p> <ol> <li>Python SDK Guide - Detailed SDK documentation</li> <li>Quick Start Tutorial - Step-by-step tutorial</li> <li>API Reference - Complete API documentation</li> <li>Examples - More example code</li> </ol>"},{"location":"getting-started/sdk-users/#key-concepts","title":"Key Concepts","text":"Concept Description WarmPool Pre-created pods managed by admin Sandbox Your allocated workspace Task Unit of work (commands, file operations) SandboxSession High-level Python API"},{"location":"getting-started/sdk-users/#common-use-cases","title":"Common Use Cases","text":"Code ExecutionFile OperationsMulti-Step Pipeline <pre><code>result = session.execute([\n    {\n        \"name\": \"run\",\n        \"type\": \"Command\",\n        \"command\": [\"python\", \"-c\", \"print(1+1)\"],\n    }\n])\n</code></pre> <pre><code>result = session.execute([\n    {\n        \"name\": \"write\",\n        \"type\": \"FilePatch\",\n        \"path\": \"/workspace/data.json\",\n        \"content\": '{\"key\": \"value\"}',\n    }\n])\n</code></pre> <pre><code>result = session.execute([\n    {\"name\": \"install\", \"type\": \"Command\", \"command\": [\"pip\", \"install\", \"numpy\"]},\n    {\"name\": \"write\", \"type\": \"FilePatch\", \"path\": \"/workspace/calc.py\", \"content\": \"import numpy; print(numpy.mean([1,2,3]))\"},\n    {\"name\": \"run\", \"type\": \"Command\", \"command\": [\"python\", \"/workspace/calc.py\"]},\n])\n</code></pre>"},{"location":"getting-started/sdk-users/#troubleshooting","title":"Troubleshooting","text":"Issue Solution <code>No warm pool found</code> Check if the pool exists: <code>kubectl get warmpools</code> <code>Connection refused</code> Verify kubeconfig: <code>kubectl cluster-info</code> <code>Timeout</code> Increase timeout in task or check pod status"},{"location":"user-guide/api-reference/","title":"API Reference","text":"<p>Complete API reference for the ARL Python SDK.</p>"},{"location":"user-guide/api-reference/#module-arl","title":"Module: arl","text":""},{"location":"user-guide/api-reference/#sandboxsession","title":"SandboxSession","text":"<pre><code>class SandboxSession:\n    \"\"\"High-level API for sandbox management and task execution.\"\"\"\n</code></pre>"},{"location":"user-guide/api-reference/#constructor","title":"Constructor","text":"<pre><code>def __init__(\n    self,\n    pool_ref: str,\n    namespace: str = \"default\",\n    keep_alive: bool = False,\n    timeout: str = \"30s\",\n) -&gt; None\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>pool_ref</code> <code>str</code> Required Name of the WarmPool to allocate from <code>namespace</code> <code>str</code> <code>\"default\"</code> Kubernetes namespace <code>keep_alive</code> <code>bool</code> <code>False</code> Keep sandbox after task completion <code>timeout</code> <code>str</code> <code>\"30s\"</code> Default timeout for tasks <p>Example:</p> <pre><code>from arl import SandboxSession\n\nsession = SandboxSession(\n    pool_ref=\"python-pool\",\n    namespace=\"default\",\n    keep_alive=True,\n    timeout=\"60s\",\n)\n</code></pre>"},{"location":"user-guide/api-reference/#context-manager","title":"Context Manager","text":"<pre><code>def __enter__(self) -&gt; \"SandboxSession\"\ndef __exit__(self, exc_type, exc_val, exc_tb) -&gt; None\n</code></pre> <p>Automatically creates and deletes sandbox.</p> <p>Example:</p> <pre><code>with SandboxSession(pool_ref=\"python-pool\") as session:\n    result = session.execute([...])\n# Sandbox is automatically deleted\n</code></pre>"},{"location":"user-guide/api-reference/#create_sandbox","title":"create_sandbox","text":"<pre><code>def create_sandbox(self) -&gt; None\n</code></pre> <p>Allocate a sandbox from the warm pool.</p> <p>Raises:</p> <ul> <li><code>kubernetes.client.ApiException</code>: If allocation fails</li> </ul> <p>Example:</p> <pre><code>session = SandboxSession(pool_ref=\"python-pool\", keep_alive=True)\nsession.create_sandbox()\n# ... use sandbox\nsession.delete_sandbox()\n</code></pre>"},{"location":"user-guide/api-reference/#delete_sandbox","title":"delete_sandbox","text":"<pre><code>def delete_sandbox(self) -&gt; None\n</code></pre> <p>Release the sandbox and return pod to pool (or delete if not keep_alive).</p> <p>Example:</p> <pre><code>session.delete_sandbox()\n</code></pre>"},{"location":"user-guide/api-reference/#execute","title":"execute","text":"<pre><code>def execute(\n    self,\n    steps: list[dict],\n    timeout: str | None = None,\n) -&gt; dict\n</code></pre> <p>Execute steps in the sandbox.</p> <p>Parameters:</p> Parameter Type Default Description <code>steps</code> <code>list[dict]</code> Required List of step definitions <code>timeout</code> <code>str \\| None</code> <code>None</code> Override default timeout <p>Returns: Task result dictionary</p> <p>Example:</p> <pre><code>result = session.execute([\n    {\"name\": \"step1\", \"type\": \"Command\", \"command\": [\"echo\", \"hello\"]},\n], timeout=\"60s\")\n</code></pre>"},{"location":"user-guide/api-reference/#register_callback","title":"register_callback","text":"<pre><code>def register_callback(\n    self,\n    event: str,\n    callback: Callable[[dict], None],\n) -&gt; None\n</code></pre> <p>Register a callback function for task events.</p> <p>Parameters:</p> Parameter Type Description <code>event</code> <code>str</code> Event name: <code>on_task_complete</code>, <code>on_task_success</code>, <code>on_task_failure</code> <code>callback</code> <code>Callable</code> Function to call with task result <p>Example:</p> <pre><code>def my_callback(result):\n    print(f\"Task state: {result['status']['state']}\")\n\nsession.register_callback(\"on_task_complete\", my_callback)\n</code></pre>"},{"location":"user-guide/api-reference/#warmpoolmanager","title":"WarmPoolManager","text":"<pre><code>class WarmPoolManager:\n    \"\"\"Manage WarmPool resources.\"\"\"\n</code></pre>"},{"location":"user-guide/api-reference/#constructor_1","title":"Constructor","text":"<pre><code>def __init__(self, namespace: str = \"default\") -&gt; None\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>namespace</code> <code>str</code> <code>\"default\"</code> Kubernetes namespace"},{"location":"user-guide/api-reference/#create_warmpool","title":"create_warmpool","text":"<pre><code>def create_warmpool(\n    self,\n    name: str,\n    image: str,\n    sidecar_image: str,\n    replicas: int = 1,\n    command: list[str] | None = None,\n) -&gt; None\n</code></pre> <p>Create a new WarmPool.</p> <p>Parameters:</p> Parameter Type Default Description <code>name</code> <code>str</code> Required WarmPool name <code>image</code> <code>str</code> Required Executor container image <code>sidecar_image</code> <code>str</code> Required Sidecar container image <code>replicas</code> <code>int</code> <code>1</code> Number of pods to maintain <code>command</code> <code>list[str] \\| None</code> <code>None</code> Container command <p>Example:</p> <pre><code>manager = WarmPoolManager(namespace=\"default\")\nmanager.create_warmpool(\n    name=\"python-pool\",\n    image=\"python:3.9-slim\",\n    sidecar_image=\"arl-sidecar:latest\",\n    replicas=3,\n)\n</code></pre>"},{"location":"user-guide/api-reference/#get_warmpool","title":"get_warmpool","text":"<pre><code>def get_warmpool(self, name: str) -&gt; dict\n</code></pre> <p>Get WarmPool details.</p> <p>Parameters:</p> Parameter Type Description <code>name</code> <code>str</code> WarmPool name <p>Returns: WarmPool resource dictionary</p> <p>Raises:</p> <ul> <li><code>kubernetes.client.ApiException</code>: If not found (status 404)</li> </ul>"},{"location":"user-guide/api-reference/#wait_for_warmpool_ready","title":"wait_for_warmpool_ready","text":"<pre><code>def wait_for_warmpool_ready(\n    self,\n    name: str,\n    timeout: int = 300,\n) -&gt; None\n</code></pre> <p>Wait for WarmPool to be ready.</p> <p>Parameters:</p> Parameter Type Default Description <code>name</code> <code>str</code> Required WarmPool name <code>timeout</code> <code>int</code> <code>300</code> Timeout in seconds <p>Raises:</p> <ul> <li><code>TimeoutError</code>: If pool is not ready within timeout</li> </ul>"},{"location":"user-guide/api-reference/#delete_warmpool","title":"delete_warmpool","text":"<pre><code>def delete_warmpool(self, name: str) -&gt; None\n</code></pre> <p>Delete a WarmPool.</p> <p>Parameters:</p> Parameter Type Description <code>name</code> <code>str</code> WarmPool name"},{"location":"user-guide/api-reference/#step-types","title":"Step Types","text":""},{"location":"user-guide/api-reference/#command-step","title":"Command Step","text":"<p>Execute a command in the sandbox.</p> <pre><code>{\n    \"name\": str,           # Required: Step name\n    \"type\": \"Command\",     # Required: Step type\n    \"command\": list[str],  # Required: Command and arguments\n    \"workDir\": str,        # Optional: Working directory\n    \"env\": dict[str, str], # Optional: Environment variables\n}\n</code></pre> <p>Example:</p> <pre><code>{\n    \"name\": \"run_python\",\n    \"type\": \"Command\",\n    \"command\": [\"python\", \"-c\", \"print('hello')\"],\n    \"workDir\": \"/workspace\",\n    \"env\": {\"PYTHONPATH\": \"/workspace/lib\"},\n}\n</code></pre>"},{"location":"user-guide/api-reference/#filepatch-step","title":"FilePatch Step","text":"<p>Create or update a file.</p> <pre><code>{\n    \"name\": str,           # Required: Step name\n    \"type\": \"FilePatch\",   # Required: Step type\n    \"path\": str,           # Required: File path\n    \"content\": str,        # Required: File content\n}\n</code></pre> <p>Example:</p> <pre><code>{\n    \"name\": \"write_config\",\n    \"type\": \"FilePatch\",\n    \"path\": \"/workspace/config.yaml\",\n    \"content\": \"key: value\\nother: 123\",\n}\n</code></pre>"},{"location":"user-guide/api-reference/#result-structure","title":"Result Structure","text":"<p>Task execution returns a dictionary with the following structure:</p> <pre><code>{\n    \"metadata\": {\n        \"name\": str,           # Task name\n        \"namespace\": str,      # Namespace\n        \"creationTimestamp\": str,\n    },\n    \"spec\": {\n        \"sandboxRef\": str,     # Sandbox name\n        \"timeout\": str,        # Timeout duration\n        \"steps\": list[dict],   # Step definitions\n    },\n    \"status\": {\n        \"state\": str,          # \"Pending\", \"Running\", \"Succeeded\", \"Failed\"\n        \"stdout\": str,         # Standard output (last command)\n        \"stderr\": str,         # Standard error (last command)\n        \"exitCode\": int,       # Exit code (last command)\n        \"startedAt\": str,      # Execution start time\n        \"completedAt\": str,    # Execution completion time\n        \"steps\": list[dict],   # Status of each step\n    },\n}\n</code></pre>"},{"location":"user-guide/api-reference/#status-fields","title":"Status Fields","text":"Field Type Description <code>state</code> <code>str</code> Task state <code>stdout</code> <code>str</code> Standard output from last command <code>stderr</code> <code>str</code> Standard error from last command <code>exitCode</code> <code>int</code> Exit code from last command <code>startedAt</code> <code>str</code> ISO timestamp of execution start <code>completedAt</code> <code>str</code> ISO timestamp of execution completion"},{"location":"user-guide/api-reference/#state-values","title":"State Values","text":"State Description <code>Pending</code> Task created, waiting to execute <code>Running</code> Task is currently executing <code>Succeeded</code> All steps completed successfully <code>Failed</code> One or more steps failed"},{"location":"user-guide/api-reference/#callback-events","title":"Callback Events","text":"Event Trigger Signature <code>on_task_complete</code> After task completes <code>fn(result: dict) -&gt; None</code> <code>on_task_success</code> Task state is \"Succeeded\" <code>fn(result: dict) -&gt; None</code> <code>on_task_failure</code> Task state is \"Failed\" <code>fn(result: dict) -&gt; None</code>"},{"location":"user-guide/api-reference/#exceptions","title":"Exceptions","text":""},{"location":"user-guide/api-reference/#kubernetesclientapiexception","title":"kubernetes.client.ApiException","text":"<p>Raised for Kubernetes API errors.</p> <p>Common status codes:</p> Status Meaning <code>404</code> Resource not found <code>403</code> Permission denied <code>409</code> Conflict (resource already exists) <code>422</code> Invalid resource specification <p>Example:</p> <pre><code>from kubernetes import client\n\ntry:\n    result = session.execute([...])\nexcept client.ApiException as e:\n    if e.status == 404:\n        print(\"Sandbox or WarmPool not found\")\n    else:\n        print(f\"API error: {e.status} - {e.reason}\")\n</code></pre>"},{"location":"user-guide/api-reference/#timeouterror","title":"TimeoutError","text":"<p>Raised when operations exceed their timeout.</p> <pre><code>try:\n    result = session.execute([...], timeout=\"5s\")\nexcept TimeoutError:\n    print(\"Task execution timed out\")\n</code></pre>"},{"location":"user-guide/examples/","title":"Examples","text":"<p>This page contains practical examples for common use cases with the ARL Python SDK.</p>"},{"location":"user-guide/examples/#basic-examples","title":"Basic Examples","text":""},{"location":"user-guide/examples/#execute-a-simple-command","title":"Execute a Simple Command","text":"<pre><code>from arl import SandboxSession\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = session.execute([\n        {\n            \"name\": \"hello\",\n            \"type\": \"Command\",\n            \"command\": [\"echo\", \"Hello, World!\"],\n        }\n    ])\n    print(result[\"status\"][\"stdout\"])\n</code></pre>"},{"location":"user-guide/examples/#write-and-run-a-python-script","title":"Write and Run a Python Script","text":"<pre><code>from arl import SandboxSession\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = session.execute([\n        {\n            \"name\": \"write_script\",\n            \"type\": \"FilePatch\",\n            \"path\": \"/workspace/script.py\",\n            \"content\": \"\"\"\ndef greet(name):\n    return f\"Hello, {name}!\"\n\nprint(greet(\"ARL\"))\n\"\"\",\n        },\n        {\n            \"name\": \"run_script\",\n            \"type\": \"Command\",\n            \"command\": [\"python\", \"/workspace/script.py\"],\n        },\n    ])\n    print(result[\"status\"][\"stdout\"])  # Hello, ARL!\n</code></pre>"},{"location":"user-guide/examples/#data-processing","title":"Data Processing","text":""},{"location":"user-guide/examples/#process-csv-data","title":"Process CSV Data","text":"<pre><code>from arl import SandboxSession\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = session.execute([\n        # Install pandas\n        {\n            \"name\": \"install\",\n            \"type\": \"Command\",\n            \"command\": [\"pip\", \"install\", \"pandas\", \"-q\"],\n        },\n        # Create sample data\n        {\n            \"name\": \"create_data\",\n            \"type\": \"FilePatch\",\n            \"path\": \"/workspace/data.csv\",\n            \"content\": \"\"\"name,age,city\nAlice,30,New York\nBob,25,San Francisco\nCharlie,35,Chicago\nDiana,28,Boston\n\"\"\",\n        },\n        # Process data\n        {\n            \"name\": \"process\",\n            \"type\": \"FilePatch\",\n            \"path\": \"/workspace/process.py\",\n            \"content\": \"\"\"\nimport pandas as pd\n\ndf = pd.read_csv('/workspace/data.csv')\nprint(f\"Total records: {len(df)}\")\nprint(f\"Average age: {df['age'].mean():.1f}\")\nprint(f\"Cities: {', '.join(df['city'].unique())}\")\n\"\"\",\n        },\n        {\n            \"name\": \"run\",\n            \"type\": \"Command\",\n            \"command\": [\"python\", \"/workspace/process.py\"],\n        },\n    ])\n    print(result[\"status\"][\"stdout\"])\n</code></pre>"},{"location":"user-guide/examples/#json-processing","title":"JSON Processing","text":"<pre><code>from arl import SandboxSession\nimport json\n\ndata = {\n    \"users\": [\n        {\"id\": 1, \"name\": \"Alice\", \"active\": True},\n        {\"id\": 2, \"name\": \"Bob\", \"active\": False},\n        {\"id\": 3, \"name\": \"Charlie\", \"active\": True},\n    ]\n}\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = session.execute([\n        {\n            \"name\": \"write_data\",\n            \"type\": \"FilePatch\",\n            \"path\": \"/workspace/users.json\",\n            \"content\": json.dumps(data, indent=2),\n        },\n        {\n            \"name\": \"process\",\n            \"type\": \"FilePatch\",\n            \"path\": \"/workspace/filter.py\",\n            \"content\": \"\"\"\nimport json\n\nwith open('/workspace/users.json') as f:\n    data = json.load(f)\n\nactive_users = [u for u in data['users'] if u['active']]\nprint(f\"Active users: {[u['name'] for u in active_users]}\")\n\"\"\",\n        },\n        {\n            \"name\": \"run\",\n            \"type\": \"Command\",\n            \"command\": [\"python\", \"/workspace/filter.py\"],\n        },\n    ])\n    print(result[\"status\"][\"stdout\"])  # Active users: ['Alice', 'Charlie']\n</code></pre>"},{"location":"user-guide/examples/#machine-learning","title":"Machine Learning","text":""},{"location":"user-guide/examples/#train-a-simple-model","title":"Train a Simple Model","text":"<pre><code>from arl import SandboxSession\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = session.execute([\n        # Install dependencies\n        {\n            \"name\": \"install\",\n            \"type\": \"Command\",\n            \"command\": [\"pip\", \"install\", \"scikit-learn\", \"numpy\", \"-q\"],\n        },\n        # Create training script\n        {\n            \"name\": \"write_script\",\n            \"type\": \"FilePatch\",\n            \"path\": \"/workspace/train.py\",\n            \"content\": \"\"\"\nfrom sklearn.datasets import load_iris\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import accuracy_score\n\n# Load data\niris = load_iris()\nX_train, X_test, y_train, y_test = train_test_split(\n    iris.data, iris.target, test_size=0.2, random_state=42\n)\n\n# Train model\nmodel = RandomForestClassifier(n_estimators=10, random_state=42)\nmodel.fit(X_train, y_train)\n\n# Evaluate\npredictions = model.predict(X_test)\naccuracy = accuracy_score(y_test, predictions)\nprint(f\"Model accuracy: {accuracy:.2%}\")\n\"\"\",\n        },\n        {\n            \"name\": \"train\",\n            \"type\": \"Command\",\n            \"command\": [\"python\", \"/workspace/train.py\"],\n        },\n    ], timeout=\"120s\")  # ML tasks may need more time\n    print(result[\"status\"][\"stdout\"])\n</code></pre>"},{"location":"user-guide/examples/#stateful-operations","title":"Stateful Operations","text":""},{"location":"user-guide/examples/#maintain-state-across-tasks","title":"Maintain State Across Tasks","text":"<pre><code>from arl import SandboxSession\n\nsession = SandboxSession(\n    pool_ref=\"python-pool\",\n    namespace=\"default\",\n    keep_alive=True  # Important: keep sandbox for state\n)\n\ntry:\n    session.create_sandbox()\n\n    # Initialize state\n    session.execute([\n        {\n            \"name\": \"init\",\n            \"type\": \"FilePatch\",\n            \"path\": \"/workspace/state.json\",\n            \"content\": '{\"counter\": 0, \"history\": []}',\n        },\n    ])\n\n    # Increment counter multiple times\n    for i in range(3):\n        result = session.execute([\n            {\n                \"name\": \"update\",\n                \"type\": \"FilePatch\",\n                \"path\": \"/workspace/update.py\",\n                \"content\": \"\"\"\nimport json\n\nwith open('/workspace/state.json') as f:\n    state = json.load(f)\n\nstate['counter'] += 1\nstate['history'].append(f\"Action {state['counter']}\")\n\nwith open('/workspace/state.json', 'w') as f:\n    json.dump(state, f, indent=2)\n\nprint(f\"Counter: {state['counter']}\")\nprint(f\"History: {state['history']}\")\n\"\"\",\n            },\n            {\n                \"name\": \"run\",\n                \"type\": \"Command\",\n                \"command\": [\"python\", \"/workspace/update.py\"],\n            },\n        ])\n        print(f\"Iteration {i+1}:\")\n        print(result[\"status\"][\"stdout\"])\n        print()\n\nfinally:\n    session.delete_sandbox()\n</code></pre>"},{"location":"user-guide/examples/#error-handling","title":"Error Handling","text":""},{"location":"user-guide/examples/#graceful-error-recovery","title":"Graceful Error Recovery","text":"<pre><code>from arl import SandboxSession\nfrom kubernetes import client\n\ndef execute_with_retry(session, steps, max_retries=3):\n    \"\"\"Execute steps with retry logic.\"\"\"\n    for attempt in range(max_retries):\n        try:\n            result = session.execute(steps)\n            if result[\"status\"][\"state\"] == \"Succeeded\":\n                return result\n            else:\n                print(f\"Attempt {attempt + 1} failed: {result['status'].get('stderr', '')}\")\n        except client.ApiException as e:\n            print(f\"API error on attempt {attempt + 1}: {e.reason}\")\n        except TimeoutError:\n            print(f\"Timeout on attempt {attempt + 1}\")\n\n    raise RuntimeError(f\"Failed after {max_retries} attempts\")\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = execute_with_retry(session, [\n        {\"name\": \"run\", \"type\": \"Command\", \"command\": [\"python\", \"-c\", \"print('OK')\"]}\n    ])\n    print(result[\"status\"][\"stdout\"])\n</code></pre>"},{"location":"user-guide/examples/#comprehensive-error-handling","title":"Comprehensive Error Handling","text":"<pre><code>from arl import SandboxSession\nfrom kubernetes import client\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = session.execute([\n        {\n            \"name\": \"risky_operation\",\n            \"type\": \"Command\",\n            \"command\": [\"python\", \"-c\", \"\"\"\nimport sys\nimport random\n\n# Simulate occasional failures\nif random.random() &lt; 0.5:\n    print(\"Operation succeeded!\", file=sys.stdout)\nelse:\n    print(\"Something went wrong!\", file=sys.stderr)\n    sys.exit(1)\n\"\"\"],\n        },\n    ])\n\n    status = result[\"status\"]\n\n    if status[\"state\"] == \"Succeeded\":\n        print(f\"\u2713 Success: {status['stdout'].strip()}\")\n    else:\n        print(f\"\u2717 Failed (exit code: {status.get('exitCode', 'unknown')})\")\n        print(f\"  Error: {status.get('stderr', 'no error message').strip()}\")\n</code></pre>"},{"location":"user-guide/examples/#using-callbacks","title":"Using Callbacks","text":""},{"location":"user-guide/examples/#progress-monitoring","title":"Progress Monitoring","text":"<pre><code>from arl import SandboxSession\nimport datetime\n\ndef log_completion(result):\n    timestamp = datetime.datetime.now().strftime(\"%H:%M:%S\")\n    state = result[\"status\"][\"state\"]\n    print(f\"[{timestamp}] Task completed: {state}\")\n\ndef log_success(result):\n    stdout = result[\"status\"].get(\"stdout\", \"\").strip()\n    if stdout:\n        print(f\"  Output: {stdout[:100]}...\")\n\ndef log_failure(result):\n    stderr = result[\"status\"].get(\"stderr\", \"\").strip()\n    exit_code = result[\"status\"].get(\"exitCode\", \"?\")\n    print(f\"  Error (exit {exit_code}): {stderr[:100]}...\")\n\nsession = SandboxSession(pool_ref=\"python-pool\", namespace=\"default\")\nsession.register_callback(\"on_task_complete\", log_completion)\nsession.register_callback(\"on_task_success\", log_success)\nsession.register_callback(\"on_task_failure\", log_failure)\n\nwith session:\n    # Run multiple tasks\n    for i in range(3):\n        print(f\"\\n--- Task {i+1} ---\")\n        session.execute([\n            {\"name\": f\"task_{i}\", \"type\": \"Command\", \"command\": [\"echo\", f\"Task {i+1} output\"]}\n        ])\n</code></pre>"},{"location":"user-guide/examples/#warmpool-management","title":"WarmPool Management","text":""},{"location":"user-guide/examples/#create-and-manage-warmpool","title":"Create and Manage WarmPool","text":"<pre><code>from arl import WarmPoolManager, SandboxSession\nfrom kubernetes import client\n\nmanager = WarmPoolManager(namespace=\"default\")\n\n# Check if pool exists, create if not\npool_name = \"my-python-pool\"\ntry:\n    manager.get_warmpool(pool_name)\n    print(f\"WarmPool '{pool_name}' already exists\")\nexcept client.ApiException as e:\n    if e.status == 404:\n        print(f\"Creating WarmPool '{pool_name}'...\")\n        manager.create_warmpool(\n            name=pool_name,\n            image=\"python:3.9-slim\",\n            sidecar_image=\"arl-sidecar:latest\",\n            replicas=2,\n        )\n        manager.wait_for_warmpool_ready(pool_name, timeout=120)\n        print(f\"WarmPool '{pool_name}' is ready\")\n    else:\n        raise\n\n# Use the pool\nwith SandboxSession(pool_ref=pool_name, namespace=\"default\") as session:\n    result = session.execute([\n        {\"name\": \"test\", \"type\": \"Command\", \"command\": [\"python\", \"--version\"]}\n    ])\n    print(f\"Python version: {result['status']['stdout'].strip()}\")\n\n# Optionally delete pool when done\n# manager.delete_warmpool(pool_name)\n</code></pre>"},{"location":"user-guide/examples/#advanced-patterns","title":"Advanced Patterns","text":""},{"location":"user-guide/examples/#pipeline-pattern","title":"Pipeline Pattern","text":"<pre><code>from arl import SandboxSession\n\ndef run_pipeline(session, stages):\n    \"\"\"Execute a pipeline of stages, stopping on first failure.\"\"\"\n    results = []\n\n    for i, stage in enumerate(stages):\n        print(f\"Running stage {i+1}: {stage['name']}\")\n        result = session.execute(stage[\"steps\"])\n        results.append(result)\n\n        if result[\"status\"][\"state\"] != \"Succeeded\":\n            print(f\"Pipeline failed at stage {i+1}\")\n            return results, False\n\n    return results, True\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    pipeline = [\n        {\n            \"name\": \"Setup\",\n            \"steps\": [\n                {\"name\": \"mkdir\", \"type\": \"Command\", \"command\": [\"mkdir\", \"-p\", \"/workspace/output\"]},\n            ]\n        },\n        {\n            \"name\": \"Generate\",\n            \"steps\": [\n                {\"name\": \"write\", \"type\": \"FilePatch\", \"path\": \"/workspace/data.txt\", \"content\": \"line1\\nline2\\nline3\"},\n            ]\n        },\n        {\n            \"name\": \"Process\",\n            \"steps\": [\n                {\"name\": \"count\", \"type\": \"Command\", \"command\": [\"wc\", \"-l\", \"/workspace/data.txt\"]},\n            ]\n        },\n    ]\n\n    results, success = run_pipeline(session, pipeline)\n    print(f\"\\nPipeline {'succeeded' if success else 'failed'}\")\n    if success:\n        print(f\"Final output: {results[-1]['status']['stdout'].strip()}\")\n</code></pre>"},{"location":"user-guide/examples/#more-examples","title":"More Examples","text":"<p>For more examples, see the examples/python directory in the repository:</p> Example Description <code>01_basic_execution.py</code> Basic command execution <code>02_multi_step_pipeline.py</code> Multi-step data processing <code>03_environment_variables.py</code> Using environment variables <code>04_working_directory.py</code> Working directory management <code>05_error_handling.py</code> Error handling patterns <code>06_long_running_task.py</code> Long-running tasks with timeouts <code>07_sandbox_reuse.py</code> Reusing sandboxes <code>08_callback_hooks.py</code> Using callback hooks <code>09_multiple_feature.py</code> Comprehensive feature demo"},{"location":"user-guide/python-sdk/","title":"Python SDK","text":"<p>The ARL Python SDK provides a high-level API for interacting with ARL-Infra sandboxed environments.</p>"},{"location":"user-guide/python-sdk/#installation","title":"Installation","text":""},{"location":"user-guide/python-sdk/#from-pypi","title":"From PyPI","text":"<pre><code>pip install arl-env\n</code></pre> <p>Or using uv:</p> <pre><code>uv add arl-env\n</code></pre>"},{"location":"user-guide/python-sdk/#from-source","title":"From Source","text":"<pre><code>git clone https://github.com/Lincyaw/agent-env.git\ncd agent-env/sdk/python/arl\npip install -e .\n</code></pre>"},{"location":"user-guide/python-sdk/#prerequisites","title":"Prerequisites","text":"<p>Before using the SDK, ensure:</p> <ol> <li>Kubernetes access: Valid <code>kubeconfig</code> file with cluster access</li> <li>ARL-Infra deployed: The operator must be running on the cluster</li> <li>WarmPool available: At least one WarmPool must exist</li> </ol> <p>Verify your setup:</p> <pre><code># Check cluster access\nkubectl cluster-info\n\n# Check ARL-Infra is deployed\nkubectl get crds | grep arl.infra.io\n\n# Check available WarmPools\nkubectl get warmpools\n</code></pre>"},{"location":"user-guide/python-sdk/#quick-start","title":"Quick Start","text":""},{"location":"user-guide/python-sdk/#basic-usage-with-context-manager","title":"Basic Usage with Context Manager","text":"<pre><code>from arl import SandboxSession\n\n# Using context manager (recommended)\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = session.execute([\n        {\n            \"name\": \"hello\",\n            \"type\": \"Command\",\n            \"command\": [\"echo\", \"Hello, World!\"],\n        }\n    ])\n\n    # Access results\n    print(result[\"status\"][\"stdout\"])  # \"Hello, World!\"\n</code></pre>"},{"location":"user-guide/python-sdk/#manual-lifecycle-management","title":"Manual Lifecycle Management","text":"<p>For long-running operations or sandbox reuse:</p> <pre><code>from arl import SandboxSession\n\nsession = SandboxSession(\n    pool_ref=\"python-pool\",\n    namespace=\"default\",\n    keep_alive=True  # Keep sandbox for multiple tasks\n)\n\ntry:\n    # Create sandbox\n    session.create_sandbox()\n\n    # Execute multiple tasks in the same sandbox\n    result1 = session.execute([...])\n    result2 = session.execute([...])\n\nfinally:\n    # Clean up\n    session.delete_sandbox()\n</code></pre>"},{"location":"user-guide/python-sdk/#core-classes","title":"Core Classes","text":""},{"location":"user-guide/python-sdk/#sandboxsession","title":"SandboxSession","text":"<p>The main class for interacting with sandboxes.</p> <pre><code>from arl import SandboxSession\n\nsession = SandboxSession(\n    pool_ref=\"python-pool\",     # WarmPool to allocate from\n    namespace=\"default\",        # Kubernetes namespace\n    keep_alive=False,           # Delete sandbox after task (default)\n    timeout=\"30s\",              # Default task timeout\n)\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>pool_ref</code> str Required Name of the WarmPool <code>namespace</code> str <code>\"default\"</code> Kubernetes namespace <code>keep_alive</code> bool <code>False</code> Keep sandbox after task completion <code>timeout</code> str <code>\"30s\"</code> Default timeout for tasks <p>Methods:</p> Method Description <code>create_sandbox()</code> Allocate a sandbox from the pool <code>delete_sandbox()</code> Release the sandbox <code>execute(steps)</code> Execute steps in the sandbox <code>register_callback(event, fn)</code> Register a callback function"},{"location":"user-guide/python-sdk/#warmpoolmanager","title":"WarmPoolManager","text":"<p>Manage WarmPool resources programmatically.</p> <pre><code>from arl import WarmPoolManager\n\nmanager = WarmPoolManager(namespace=\"default\")\n\n# Create a WarmPool\nmanager.create_warmpool(\n    name=\"my-pool\",\n    image=\"python:3.9-slim\",\n    sidecar_image=\"arl-sidecar:latest\",\n    replicas=3,\n)\n\n# Wait for pool to be ready\nmanager.wait_for_warmpool_ready(\"my-pool\")\n\n# Get WarmPool status\npool = manager.get_warmpool(\"my-pool\")\n\n# Delete WarmPool\nmanager.delete_warmpool(\"my-pool\")\n</code></pre>"},{"location":"user-guide/python-sdk/#task-steps","title":"Task Steps","text":""},{"location":"user-guide/python-sdk/#command-step","title":"Command Step","text":"<p>Execute a command in the sandbox:</p> <pre><code>{\n    \"name\": \"run_script\",\n    \"type\": \"Command\",\n    \"command\": [\"python\", \"script.py\"],\n    \"workDir\": \"/workspace\",      # Optional: working directory\n    \"env\": {\"DEBUG\": \"true\"},     # Optional: environment variables\n}\n</code></pre>"},{"location":"user-guide/python-sdk/#filepatch-step","title":"FilePatch Step","text":"<p>Create or update a file:</p> <pre><code>{\n    \"name\": \"write_file\",\n    \"type\": \"FilePatch\",\n    \"path\": \"/workspace/script.py\",\n    \"content\": \"print('Hello!')\",\n}\n</code></pre>"},{"location":"user-guide/python-sdk/#result-handling","title":"Result Handling","text":"<p>Task results are returned as dictionaries:</p> <pre><code>result = session.execute([...])\n\n# Access status\nstatus = result[\"status\"]\nstate = status[\"state\"]           # \"Succeeded\" or \"Failed\"\nstdout = status.get(\"stdout\", \"\") # Standard output\nstderr = status.get(\"stderr\", \"\") # Standard error\nexit_code = status.get(\"exitCode\", 0)\n\n# Check success\nif state == \"Succeeded\":\n    print(f\"Output: {stdout}\")\nelse:\n    print(f\"Error: {stderr}\")\n</code></pre>"},{"location":"user-guide/python-sdk/#callbacks","title":"Callbacks","text":"<p>Register callbacks for task events:</p> <pre><code>def on_complete(result):\n    print(f\"Task completed: {result['status']['state']}\")\n\ndef on_success(result):\n    print(f\"Success! Output: {result['status']['stdout']}\")\n\ndef on_failure(result):\n    print(f\"Failed! Error: {result['status']['stderr']}\")\n\nsession = SandboxSession(pool_ref=\"python-pool\")\nsession.register_callback(\"on_task_complete\", on_complete)\nsession.register_callback(\"on_task_success\", on_success)\nsession.register_callback(\"on_task_failure\", on_failure)\n</code></pre> <p>Available events:</p> Event Trigger <code>on_task_complete</code> After task completes (success or failure) <code>on_task_success</code> Only when task succeeds <code>on_task_failure</code> Only when task fails"},{"location":"user-guide/python-sdk/#error-handling","title":"Error Handling","text":"<pre><code>from kubernetes import client as k8s_client\n\ntry:\n    with SandboxSession(pool_ref=\"python-pool\") as session:\n        result = session.execute([...])\n\nexcept k8s_client.ApiException as e:\n    if e.status == 404:\n        print(\"WarmPool not found\")\n    else:\n        print(f\"Kubernetes API error: {e}\")\n\nexcept TimeoutError:\n    print(\"Task timed out\")\n\nexcept Exception as e:\n    print(f\"Unexpected error: {e}\")\n</code></pre>"},{"location":"user-guide/python-sdk/#best-practices","title":"Best Practices","text":""},{"location":"user-guide/python-sdk/#1-use-context-managers","title":"1. Use Context Managers","text":"<pre><code># Good: Resources are automatically cleaned up\nwith SandboxSession(pool_ref=\"python-pool\") as session:\n    result = session.execute([...])\n\n# Avoid: Manual cleanup required\nsession = SandboxSession(pool_ref=\"python-pool\")\nsession.create_sandbox()\n# ... if exception occurs, sandbox may not be cleaned up\nsession.delete_sandbox()\n</code></pre>"},{"location":"user-guide/python-sdk/#2-reuse-sandboxes-for-related-tasks","title":"2. Reuse Sandboxes for Related Tasks","text":"<pre><code># Good: Single sandbox for related tasks\nsession = SandboxSession(pool_ref=\"python-pool\", keep_alive=True)\ntry:\n    session.create_sandbox()\n\n    # Setup\n    session.execute([{\"name\": \"install\", \"type\": \"Command\", \"command\": [\"pip\", \"install\", \"numpy\"]}])\n\n    # Multiple executions share the environment\n    for i in range(10):\n        session.execute([{\"name\": f\"run_{i}\", \"type\": \"Command\", \"command\": [\"python\", \"script.py\"]}])\n\nfinally:\n    session.delete_sandbox()\n</code></pre>"},{"location":"user-guide/python-sdk/#3-handle-timeouts-appropriately","title":"3. Handle Timeouts Appropriately","text":"<pre><code># Set appropriate timeouts for long-running tasks\nresult = session.execute([\n    {\n        \"name\": \"long_task\",\n        \"type\": \"Command\",\n        \"command\": [\"python\", \"long_running_script.py\"],\n    }\n], timeout=\"5m\")  # 5 minutes\n</code></pre>"},{"location":"user-guide/python-sdk/#4-check-results","title":"4. Check Results","text":"<pre><code>result = session.execute([...])\n\nif result[\"status\"][\"state\"] != \"Succeeded\":\n    stderr = result[\"status\"].get(\"stderr\", \"\")\n    raise RuntimeError(f\"Task failed: {stderr}\")\n</code></pre>"},{"location":"user-guide/python-sdk/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Tutorial - Step-by-step tutorial</li> <li>API Reference - Complete API documentation</li> <li>Examples - More code examples</li> </ul>"},{"location":"user-guide/quickstart/","title":"Quick Start Tutorial","text":"<p>This tutorial walks you through using the ARL Python SDK from installation to execution.</p>"},{"location":"user-guide/quickstart/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.9+</li> <li>Access to a Kubernetes cluster with ARL-Infra deployed</li> <li>Valid <code>kubeconfig</code> file</li> </ul>"},{"location":"user-guide/quickstart/#step-1-install-the-sdk","title":"Step 1: Install the SDK","text":"<pre><code>pip install arl-env\n</code></pre>"},{"location":"user-guide/quickstart/#step-2-verify-cluster-access","title":"Step 2: Verify Cluster Access","text":"<pre><code># Check cluster connectivity\nkubectl cluster-info\n\n# Verify ARL-Infra is deployed\nkubectl get warmpools\n</code></pre> <p>You should see at least one WarmPool. If not, ask your administrator to create one.</p>"},{"location":"user-guide/quickstart/#step-3-your-first-task","title":"Step 3: Your First Task","text":"<p>Create a file called <code>hello.py</code>:</p> <pre><code>from arl import SandboxSession\n\n# Connect to a sandbox\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    # Execute a simple command\n    result = session.execute([\n        {\n            \"name\": \"hello\",\n            \"type\": \"Command\",\n            \"command\": [\"echo\", \"Hello from ARL!\"],\n        }\n    ])\n\n    # Print the output\n    print(result[\"status\"][\"stdout\"])\n</code></pre> <p>Run it:</p> <pre><code>python hello.py\n</code></pre> <p>Expected output:</p> <pre><code>Hello from ARL!\n</code></pre>"},{"location":"user-guide/quickstart/#step-4-write-and-execute-code","title":"Step 4: Write and Execute Code","text":"<p>Let's write a Python script and execute it:</p> <pre><code>from arl import SandboxSession\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = session.execute([\n        # Step 1: Write a Python script\n        {\n            \"name\": \"write_script\",\n            \"type\": \"FilePatch\",\n            \"path\": \"/workspace/calculate.py\",\n            \"content\": \"\"\"\nimport math\n\ndef calculate_circle(radius):\n    area = math.pi * radius ** 2\n    circumference = 2 * math.pi * radius\n    return area, circumference\n\nradius = 5\narea, circumference = calculate_circle(radius)\nprint(f\"Circle with radius {radius}:\")\nprint(f\"  Area: {area:.2f}\")\nprint(f\"  Circumference: {circumference:.2f}\")\n\"\"\",\n        },\n        # Step 2: Execute the script\n        {\n            \"name\": \"run_script\",\n            \"type\": \"Command\",\n            \"command\": [\"python\", \"/workspace/calculate.py\"],\n        },\n    ])\n\n    print(result[\"status\"][\"stdout\"])\n</code></pre> <p>Expected output:</p> <pre><code>Circle with radius 5:\n  Area: 78.54\n  Circumference: 31.42\n</code></pre>"},{"location":"user-guide/quickstart/#step-5-environment-variables","title":"Step 5: Environment Variables","text":"<p>Pass environment variables to your commands:</p> <pre><code>from arl import SandboxSession\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = session.execute([\n        {\n            \"name\": \"write_script\",\n            \"type\": \"FilePatch\",\n            \"path\": \"/workspace/env_demo.py\",\n            \"content\": \"\"\"\nimport os\n\nname = os.environ.get(\"USER_NAME\", \"Guest\")\nmode = os.environ.get(\"MODE\", \"default\")\n\nprint(f\"Hello, {name}!\")\nprint(f\"Running in {mode} mode\")\n\"\"\",\n        },\n        {\n            \"name\": \"run_script\",\n            \"type\": \"Command\",\n            \"command\": [\"python\", \"/workspace/env_demo.py\"],\n            \"env\": {\n                \"USER_NAME\": \"Alice\",\n                \"MODE\": \"production\",\n            },\n        },\n    ])\n\n    print(result[\"status\"][\"stdout\"])\n</code></pre> <p>Expected output:</p> <pre><code>Hello, Alice!\nRunning in production mode\n</code></pre>"},{"location":"user-guide/quickstart/#step-6-persistent-sandbox","title":"Step 6: Persistent Sandbox","text":"<p>For multiple related tasks, reuse the same sandbox:</p> <pre><code>from arl import SandboxSession\n\n# Create a persistent session\nsession = SandboxSession(\n    pool_ref=\"python-pool\",\n    namespace=\"default\",\n    keep_alive=True  # Keep sandbox between tasks\n)\n\ntry:\n    session.create_sandbox()\n\n    # Task 1: Initialize a counter file\n    session.execute([\n        {\n            \"name\": \"init\",\n            \"type\": \"FilePatch\",\n            \"path\": \"/workspace/counter.txt\",\n            \"content\": \"0\",\n        }\n    ])\n\n    # Task 2: Increment counter\n    result = session.execute([\n        {\n            \"name\": \"increment\",\n            \"type\": \"Command\",\n            \"command\": [\"sh\", \"-c\", \n                \"count=$(cat /workspace/counter.txt); \"\n                \"count=$((count + 1)); \"\n                \"echo $count &gt; /workspace/counter.txt; \"\n                \"echo Counter: $count\"\n            ],\n        }\n    ])\n    print(result[\"status\"][\"stdout\"])  # Counter: 1\n\n    # Task 3: Increment again (state persists!)\n    result = session.execute([\n        {\n            \"name\": \"increment\",\n            \"type\": \"Command\",\n            \"command\": [\"sh\", \"-c\", \n                \"count=$(cat /workspace/counter.txt); \"\n                \"count=$((count + 1)); \"\n                \"echo $count &gt; /workspace/counter.txt; \"\n                \"echo Counter: $count\"\n            ],\n        }\n    ])\n    print(result[\"status\"][\"stdout\"])  # Counter: 2\n\nfinally:\n    session.delete_sandbox()\n</code></pre>"},{"location":"user-guide/quickstart/#step-7-error-handling","title":"Step 7: Error Handling","text":"<p>Handle errors gracefully:</p> <pre><code>from arl import SandboxSession\n\nwith SandboxSession(pool_ref=\"python-pool\", namespace=\"default\") as session:\n    result = session.execute([\n        {\n            \"name\": \"failing_command\",\n            \"type\": \"Command\",\n            \"command\": [\"python\", \"-c\", \"raise ValueError('Something went wrong!')\"],\n        }\n    ])\n\n    status = result[\"status\"]\n\n    if status[\"state\"] == \"Succeeded\":\n        print(f\"Success: {status['stdout']}\")\n    else:\n        print(f\"Failed with exit code: {status.get('exitCode', 'unknown')}\")\n        print(f\"Error output: {status.get('stderr', 'no error output')}\")\n</code></pre>"},{"location":"user-guide/quickstart/#step-8-using-callbacks","title":"Step 8: Using Callbacks","text":"<p>Monitor task execution with callbacks:</p> <pre><code>from arl import SandboxSession\n\ndef on_complete(result):\n    state = result[\"status\"][\"state\"]\n    print(f\"[Callback] Task completed with state: {state}\")\n\ndef on_success(result):\n    stdout = result[\"status\"].get(\"stdout\", \"\")\n    print(f\"[Callback] Success! Output: {stdout[:50]}...\")\n\ndef on_failure(result):\n    stderr = result[\"status\"].get(\"stderr\", \"\")\n    print(f\"[Callback] Failed! Error: {stderr[:50]}...\")\n\n# Create session and register callbacks\nsession = SandboxSession(pool_ref=\"python-pool\", namespace=\"default\")\nsession.register_callback(\"on_task_complete\", on_complete)\nsession.register_callback(\"on_task_success\", on_success)\nsession.register_callback(\"on_task_failure\", on_failure)\n\nwith session:\n    # This will trigger on_complete and on_success\n    result = session.execute([\n        {\n            \"name\": \"success_task\",\n            \"type\": \"Command\",\n            \"command\": [\"echo\", \"This will succeed\"],\n        }\n    ])\n</code></pre>"},{"location":"user-guide/quickstart/#summary","title":"Summary","text":"<p>You've learned how to:</p> <ul> <li> Install the ARL SDK</li> <li> Execute simple commands</li> <li> Write and execute code files</li> <li> Use environment variables</li> <li> Maintain persistent sandboxes</li> <li> Handle errors</li> <li> Use callbacks</li> </ul>"},{"location":"user-guide/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Python SDK Guide - Detailed SDK documentation</li> <li>API Reference - Complete API documentation</li> <li>Examples - More advanced examples</li> </ul>"}]}